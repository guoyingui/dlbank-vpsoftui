"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.VpEchart=exports.VpIconGroup=exports.VpBreadcrumb=exports.ErrorPage=exports.VpAlertMsg=exports.VpLightBox=exports.VpDrawer=exports.VpPopover=exports.VpFMention=exports.VpMention=exports.VpConfirmTag=exports.VpInputUploader=exports.VpRightClick=exports.VpFUEditor=exports.VpUEditor=exports.VpFUploader=exports.VpUploader=exports.VpLink=exports.VpIframe=exports.VpIframeRouter=void 0,exports.VpLocaleProvider=exports.VpQueueAnim=exports.VpSteps=exports.VpTabPane=exports.VpTabs=exports.VpCalendar=exports.VpCard=exports.VpBadge=exports.VpAlert=exports.VpTag=exports.VpTooltip=exports.VpProgress=exports.VpTimeline=exports.VpTree=exports.VpPagination=exports.VpDropdown=exports.VpTreeSelect=exports.VP_SHOW_CHILD=exports.VP_SHOW_PARENT=exports.VP_SHOW_ALL=exports.VpTreeNode=exports.VpTransfer=exports.VpMenu=exports.VpMenuItemGroup=exports.VpSubMenu=exports.VpMenuItem=exports.VpPopconfirm=exports.VpMsgLoading=exports.VpMsgWarning=exports.VpMsgError=exports.VpMsgSuccess=exports.VpMsgInfo=exports.VpTable1=exports.EditTableCol=exports.VpTable=exports.VpEditColTable=exports.EditableCol=exports.VpCollapse=exports.VpPanel=exports.VpFCollapse=exports.VpModal=exports.VpMWarning=exports.VpMError=exports.VpMSuccess=exports.VpMInfo=exports.VpConfirm=exports.VpFUpload=exports.VpUpLoadDragger=exports.VpUpLoad=exports.VpFTimePicker=exports.VpTimePicker=exports.VpFRangePicker=exports.VpRangePicker=exports.VpMonthPicker=exports.VpFDatePicker=exports.VpDatePicker=exports.VpFSlider=exports.VpSlider=exports.VpFCascader=exports.VpCascader=exports.VpFSwitch=exports.VpSwitch=exports.VpFSelect=exports.VpSelect=exports.VpOptGroup=exports.VpOption=exports.VpFRadio=exports.VpRadioGroup=exports.VpRadioButton=exports.VpRadio=exports.VpFCheckbox=exports.VpCheckbox=exports.VpFInputNumber=exports.VpInputNumber=exports.VpFInput=exports.VpInput=exports.VpInputGroup=exports.VpForm=exports.VpFormCreate=exports.FormItem=exports.VpCol=exports.VpRow=exports.VpButtonGroup=exports.VpButton=exports.VpIconFont=exports.VpIcon=exports.VpSpin=exports.showScroll=exports.VpWidgetGroup=exports.VpPopWindow=exports.fetch_time_out=exports.vpDownLoad=exports.vpAdd=exports.vpRemove=exports.vpQuery=exports.vpUpLoad=exports.vpEdit=exports.loginOut=exports.loginIn=exports.vpFormatDate=void 0;var _breadcrumb=require("antd/lib/breadcrumb"),_breadcrumb2=_interopRequireDefault(_breadcrumb),_popover=require("antd/lib/popover"),_popover2=_interopRequireDefault(_popover),_regenerator=require("babel-runtime/regenerator"),_regenerator2=_interopRequireDefault(_regenerator),_asyncToGenerator2=require("babel-runtime/helpers/asyncToGenerator"),_asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2),_promise=require("babel-runtime/core-js/promise"),_promise2=_interopRequireDefault(_promise),_defineProperty2=require("babel-runtime/helpers/defineProperty"),_defineProperty3=_interopRequireDefault(_defineProperty2),_toConsumableArray2=require("babel-runtime/helpers/toConsumableArray"),_toConsumableArray3=_interopRequireDefault(_toConsumableArray2),_localeProvider=require("antd/lib/locale-provider"),_localeProvider2=_interopRequireDefault(_localeProvider),_steps=require("antd/lib/steps"),_steps2=_interopRequireDefault(_steps),_tabs=require("antd/lib/tabs"),_tabs2=_interopRequireDefault(_tabs),_calendar=require("antd/lib/calendar"),_calendar2=_interopRequireDefault(_calendar),_card=require("antd/lib/card"),_card2=_interopRequireDefault(_card),_badge=require("antd/lib/badge"),_badge2=_interopRequireDefault(_badge),_alert=require("antd/lib/alert"),_alert2=_interopRequireDefault(_alert),_tag=require("antd/lib/tag"),_tag2=_interopRequireDefault(_tag),_tooltip=require("antd/lib/tooltip"),_tooltip2=_interopRequireDefault(_tooltip),_progress=require("antd/lib/progress"),_progress2=_interopRequireDefault(_progress),_timeline=require("antd/lib/timeline"),_timeline2=_interopRequireDefault(_timeline),_pagination=require("antd/lib/pagination"),_pagination2=_interopRequireDefault(_pagination),_dropdown=require("antd/lib/dropdown"),_dropdown2=_interopRequireDefault(_dropdown),_treeSelect=require("antd/lib/tree-select"),_treeSelect2=_interopRequireDefault(_treeSelect),_transfer=require("antd/lib/transfer"),_transfer2=_interopRequireDefault(_transfer),_menu=require("antd/lib/menu"),_menu2=_interopRequireDefault(_menu),_popconfirm=require("antd/lib/popconfirm"),_popconfirm2=_interopRequireDefault(_popconfirm),_typeof2=require("babel-runtime/helpers/typeof"),_typeof3=_interopRequireDefault(_typeof2),_stringify=require("babel-runtime/core-js/json/stringify"),_stringify2=_interopRequireDefault(_stringify),_table=require("antd/lib/table"),_table2=_interopRequireDefault(_table),_collapse=require("antd/lib/collapse"),_collapse2=_interopRequireDefault(_collapse),_modal=require("antd/lib/modal"),_modal2=_interopRequireDefault(_modal),_upload=require("antd/lib/upload"),_upload2=_interopRequireDefault(_upload),_timePicker=require("antd/lib/time-picker"),_timePicker2=_interopRequireDefault(_timePicker),_datePicker=require("antd/lib/date-picker"),_datePicker2=_interopRequireDefault(_datePicker),_slider=require("antd/lib/slider"),_slider2=_interopRequireDefault(_slider),_cascader=require("antd/lib/cascader"),_cascader2=_interopRequireDefault(_cascader),_switch=require("antd/lib/switch"),_switch2=_interopRequireDefault(_switch),_radio=require("antd/lib/radio"),_radio2=_interopRequireDefault(_radio),_checkbox=require("antd/lib/checkbox"),_checkbox2=_interopRequireDefault(_checkbox),_inputNumber=require("antd/lib/input-number"),_inputNumber2=_interopRequireDefault(_inputNumber),_objectWithoutProperties2=require("babel-runtime/helpers/objectWithoutProperties"),_objectWithoutProperties3=_interopRequireDefault(_objectWithoutProperties2),_input=require("antd/lib/input"),_input2=_interopRequireDefault(_input),_form=require("antd/lib/form"),_form2=_interopRequireDefault(_form),_col=require("antd/lib/col"),_col2=_interopRequireDefault(_col),_row=require("antd/lib/row"),_row2=_interopRequireDefault(_row),_button=require("antd/lib/button"),_button2=_interopRequireDefault(_button),_extends2=require("babel-runtime/helpers/extends"),_extends3=_interopRequireDefault(_extends2),_icon=require("antd/lib/icon"),_icon2=_interopRequireDefault(_icon),_spin2=require("antd/lib/spin"),_spin3=_interopRequireDefault(_spin2),_getPrototypeOf=require("babel-runtime/core-js/object/get-prototype-of"),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=require("babel-runtime/helpers/classCallCheck"),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=require("babel-runtime/helpers/createClass"),_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=require("babel-runtime/helpers/possibleConstructorReturn"),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=require("babel-runtime/helpers/inherits"),_inherits3=_interopRequireDefault(_inherits2);require("antd/lib/breadcrumb/style"),require("antd/lib/popover/style"),require("antd/lib/locale-provider/style"),require("antd/lib/steps/style"),require("antd/lib/tabs/style"),require("antd/lib/calendar/style"),require("antd/lib/card/style"),require("antd/lib/badge/style"),require("antd/lib/alert/style"),require("antd/lib/tag/style"),require("antd/lib/tooltip/style"),require("antd/lib/progress/style"),require("antd/lib/timeline/style"),require("antd/lib/pagination/style"),require("antd/lib/dropdown/style"),require("antd/lib/tree-select/style"),require("antd/lib/transfer/style"),require("antd/lib/menu/style"),require("antd/lib/popconfirm/style"),require("antd/lib/table/style"),require("antd/lib/collapse/style"),require("antd/lib/modal/style"),require("antd/lib/upload/style"),require("antd/lib/time-picker/style"),require("antd/lib/date-picker/style"),require("antd/lib/slider/style"),require("antd/lib/cascader/style"),require("antd/lib/switch/style"),require("antd/lib/radio/style"),require("antd/lib/checkbox/style"),require("antd/lib/input-number/style"),require("antd/lib/input/style"),require("antd/lib/form/style"),require("antd/lib/col/style"),require("antd/lib/row/style"),require("antd/lib/button/style"),require("antd/lib/icon/style"),require("antd/lib/spin/style");var _react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_reactDom2=_interopRequireDefault(_reactDom),_VpTree=require("../VpTree"),_rcQueueAnim=require("rc-queue-anim"),_rcQueueAnim2=_interopRequireDefault(_rcQueueAnim),_en_US=require("antd/lib/locale-provider/en_US"),_en_US2=_interopRequireDefault(_en_US),_addDomEventListener=require("add-dom-event-listener"),_addDomEventListener2=_interopRequireDefault(_addDomEventListener),_utils=require("../utils/utils"),_webuploader=require("webuploader"),_webuploader2=_interopRequireDefault(_webuploader);require("webuploader/css/webuploader.css"),require("./base.less"),require("./index.less");var _VpUploader=require("../VpUploader"),_VpUploader2=_interopRequireDefault(_VpUploader),_VpRightClick=require("../VpRightClick"),_VpRightClick2=_interopRequireDefault(_VpRightClick),_VpPopWindow=require("../VpPopWindow"),_VpWidgetGroup=require("../VpWidgetGroup"),_VpSelectPage=require("../VpSelectPage"),_VpSelectPage2=_interopRequireDefault(_VpSelectPage),_VpMention=require("../VpMention"),_VpMessage=require("../VpMessage"),_VpMessage2=_interopRequireDefault(_VpMessage),_VpAlertMsg=require("../VpAlertMsg"),_VpAlertMsg2=_interopRequireDefault(_VpAlertMsg),_ParseModal=require("../socketparse/ParseModal"),_ParseModal2=_interopRequireDefault(_ParseModal),_fetch=require("../utils/fetch"),_VpDrawer=require("../VpDrawer"),_VpDrawer2=_interopRequireDefault(_VpDrawer),_VpLightBox=require("../VpLightBox"),_VpLightBox2=_interopRequireDefault(_VpLightBox),_moment=require("moment"),_moment2=_interopRequireDefault(_moment),_VpDTable=require("../VpDTable"),_VpEditTableCol=require("../VpEditTableCol"),_VpIconGroup=require("../VpIconGroup"),_VpIconGroup2=_interopRequireDefault(_VpIconGroup),_VpCharts=require("../VpCharts"),_VpCharts2=_interopRequireDefault(_VpCharts);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var vpFormatDate=exports.vpFormatDate=function(e,t){var r=1<arguments.length&&void 0!==t?t:"YYYY-MM-DD";return(0,_moment2.default)(e).format(r)},loginIn=exports.loginIn=_fetch.loginIn1,loginOut=exports.loginOut=_fetch.loginOut1,vpEdit=exports.vpEdit=_fetch.vpEdit1,vpUpLoad=exports.vpUpLoad=_fetch.vpUpLoad1,vpQuery=exports.vpQuery=_fetch.vpQuery1,vpRemove=exports.vpRemove=_fetch.vpRemove1,vpAdd=exports.vpAdd=_fetch.vpAdd1,vpDownLoad=exports.vpDownLoad=_fetch.vpDownLoad1,fetch_time_out=exports.fetch_time_out=_fetch.fetch_time_out1,VpPopWindow=exports.VpPopWindow=_VpPopWindow.VpPopWindow1,VpWidgetGroup=exports.VpWidgetGroup=_VpWidgetGroup.VpWidgetGroup1;Array.prototype.findIndex=function(e){if(null===this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,r=Object(this),a=r.length>>>0,o=arguments[1],i=0;i<a;i++)if(t=r[i],e.call(o,t,i,r))return i;return-1};var showScroll=exports.showScroll=function(e){e.onmouseover=function(){this.className="overflow-over"},e.onmouseout=function(){this.className="overflow-hid"}},VpSpin=exports.VpSpin=function(e){function t(){return(0,_classCallCheck3.default)(this,t),(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).apply(this,arguments))}return(0,_inherits3.default)(t,e),(0,_createClass3.default)(t,[{key:"render",value:function(){var e=_react2.default.createElement(_spin3.default,this.props);return this.props.className&&this.props.children&&(e=_react2.default.createElement("div",{className:this.props.className+"-dynspin"},_react2.default.createElement(_spin3.default,this.props))),e}}]),t}(_react2.default.Component),VpIcon=exports.VpIcon=function(e){function t(){return(0,_classCallCheck3.default)(this,t),(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).apply(this,arguments))}return(0,_inherits3.default)(t,e),(0,_createClass3.default)(t,[{key:"render",value:function(){return-1===this.props.type.indexOf("vpicon-")?_react2.default.createElement(_icon2.default,this.props):_react2.default.createElement(VpIconFont,this.props)}}]),t}(_react2.default.Component),VpIconFont=exports.VpIconFont=function(e){function t(){return(0,_classCallCheck3.default)(this,t),(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).apply(this,arguments))}return(0,_inherits3.default)(t,e),(0,_createClass3.default)(t,[{key:"render",value:function(){var e,t=void 0,r=this.props.className?this.props.className+" vpicon "+this.props.type:"vpicon "+this.props.type,a={};for(var o in this.props)"type"==o||"className"==o?t=r:a[o]=this.props[o];return e=a,_react2.default.createElement("i",(0,_extends3.default)({className:t},e))}}]),t}(_react2.default.Component),VpButton=exports.VpButton=_button2.default,VpButtonGroup=exports.VpButtonGroup=_button2.default.Group,VpRow=exports.VpRow=_row2.default,VpCol=exports.VpCol=_col2.default,FormItem=exports.FormItem=_form2.default.Item,VpFormCreate=exports.VpFormCreate=_form2.default.create(),VpForm=exports.VpForm=_form2.default,VpInputGroup=exports.VpInputGroup=_input2.default.Group,VpInput=exports.VpInput=function(e){function t(){return(0,_classCallCheck3.default)(this,t),(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).apply(this,arguments))}return(0,_inherits3.default)(t,e),(0,_createClass3.default)(t,[{key:"render",value:function(){var e=_react2.default.createElement(_input2.default,this.props);return this.props.prefix&&(e=_react2.default.createElement("div",{className:"pr selectmodalhander"},_react2.default.createElement("span",{style:{position:"absolute",top:0,left:10,zIndex:1}},this.props.prefix),_react2.default.createElement(_input2.default,(0,_extends3.default)({style:{paddingLeft:30}},this.props)))),this.props.suffix&&(e=_react2.default.createElement("div",{className:"pr selectmodalhander"},_react2.default.createElement("span",{style:{position:"absolute",top:0,right:7,bottom:0,zIndex:1,cursor:"pointer"}},this.props.suffix),_react2.default.createElement(_input2.default,(0,_extends3.default)({style:{paddingRight:35}},this.props)))),e}}]),t}(_react2.default.Component),VpFInput=exports.VpFInput=function(e){function t(){return(0,_classCallCheck3.default)(this,t),(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).apply(this,arguments))}return(0,_inherits3.default)(t,e),(0,_createClass3.default)(t,[{key:"render",value:function(){var e=this.props,t=(e.style,(0,_objectWithoutProperties3.default)(e,["style"]));return _react2.default.createElement(FormItem,t,_react2.default.createElement(VpInput,this.props),this.props.tips)}}]),t}(_react2.default.Component),VpInputNumber=exports.VpInputNumber=function(e){function t(){return(0,_classCallCheck3.default)(this,t),(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).apply(this,arguments))}return(0,_inherits3.default)(t,e),(0,_createClass3.default)(t,[{key:"render",value:function(){return _react2.default.createElement(_inputNumber2.default,this.props)}}]),t}(_react2.default.Component),VpFInputNumber=exports.VpFInputNumber=function(e){function t(){return(0,_classCallCheck3.default)(this,t),(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).apply(this,arguments))}return(0,_inherits3.default)(t,e),(0,_createClass3.default)(t,[{key:"render",value:function(){return _react2.default.createElement(FormItem,this.props,_react2.default.createElement(VpInputNumber,this.props))}}]),t}(_react2.default.Component),CheckboxGroup=_checkbox2.default.Group,VpCheckbox=exports.VpCheckbox=function(e){function t(e){(0,_classCallCheck3.default)(this,t);var l=(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).call(this,e));return l.getOptions=function(e){var t=e||l.props,r=t.url,a=t.params,o=t.optionLabel,i=t.optionValue,n=t.method;r&&("POST"===n?vpAdd:vpQuery)(r,a).then(function(e){if(e.data[0][o]&&e.data[0][i]){var t=e.data.map(function(e,t){return{label:e[o],value:e[i],disabled:!!e.disabled}});l.setState({options:t})}else console.error("checkbox 数据格式不匹配")})},l.state={options:null},l}return(0,_inherits3.default)(t,e),(0,_createClass3.default)(t,[{key:"componentWillMount",value:function(){this.getOptions()}},{key:"componentWillReceiveProps",value:function(e){this.getOptions(e)}},{key:"render",value:function(){return _react2.default.createElement("div",{className:this.props.className},_react2.default.createElement(CheckboxGroup,(0,_extends3.default)({},this.props,{options:this.state.options||this.props.options})))}}]),t}(_react2.default.Component);VpCheckbox.defaultProps={optionLabel:"label",optionValue:"value",params:{},method:"GET"};var VpFCheckbox=exports.VpFCheckbox=function(e){function t(){return(0,_classCallCheck3.default)(this,t),(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).apply(this,arguments))}return(0,_inherits3.default)(t,e),(0,_createClass3.default)(t,[{key:"render",value:function(){return _react2.default.createElement(FormItem,this.props,_react2.default.createElement(VpCheckbox,this.props))}}]),t}(_react2.default.Component),VpRadio=exports.VpRadio=_radio2.default,VpRadioButton=exports.VpRadioButton=_radio2.default.Button,VpRadioGroup=exports.VpRadioGroup=function(e){function t(e){(0,_classCallCheck3.default)(this,t);var l=(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).call(this,e));return l.getOptions=function(e){var t=e||l.props,r=t.url,a=t.params,o=t.optionLabel,i=t.optionValue,n=t.method;r&&("POST"===n?vpAdd:vpQuery)(r,a).then(function(e){if(e.data[0][o]&&e.data[0][i]){var t=e.data.map(function(e,t){return{label:e[o],value:e[i],disabled:!!e.disabled}});l.setState({options:t})}else console.error("radio 数据格式不匹配")})},l.state={options:null},l}return(0,_inherits3.default)(t,e),(0,_createClass3.default)(t,[{key:"componentWillMount",value:function(){this.getOptions()}},{key:"componentWillReceiveProps",value:function(e){this.getOptions(e)}},{key:"render",value:function(){var e=this.props,r=(e.optionLabel,e.optionValue,e.showType),t=this.state.options||this.props.options;return _react2.default.createElement(_radio2.default.Group,this.props,t?t.map(function(e,t){return"button"===r?_react2.default.createElement(VpRadioButton,{key:e.value,value:e.value,disabled:!!e.disabled},e.label):_react2.default.createElement(VpRadio,{key:e.value,value:e.value,disabled:!!e.disabled},e.label)}):this.props.children)}}]),t}(_react2.default.Component);VpRadioGroup.defaultProps={optionLabel:"label",optionValue:"value",params:{},method:"GET"};var VpFRadio=exports.VpFRadio=function(e){function t(){return(0,_classCallCheck3.default)(this,t),(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).apply(this,arguments))}return(0,_inherits3.default)(t,e),(0,_createClass3.default)(t,[{key:"render",value:function(){return _react2.default.createElement(FormItem,this.props,this.props.children)}}]),t}(_react2.default.Component),VpOption=exports.VpOption=_VpSelectPage2.default.Option,VpOptGroup=exports.VpOptGroup=_VpSelectPage2.default.OptGroup,VpSelect=exports.VpSelect=_VpSelectPage2.default,VpFSelect=exports.VpFSelect=function(e){function t(){return(0,_classCallCheck3.default)(this,t),(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).apply(this,arguments))}return(0,_inherits3.default)(t,e),(0,_createClass3.default)(t,[{key:"render",value:function(){return _react2.default.createElement(FormItem,this.props,this.props.children)}}]),t}(_react2.default.Component),VpSwitch=exports.VpSwitch=function(e){function t(){return(0,_classCallCheck3.default)(this,t),(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).apply(this,arguments))}return(0,_inherits3.default)(t,e),(0,_createClass3.default)(t,[{key:"render",value:function(){return _react2.default.createElement(_switch2.default,this.props)}}]),t}(_react2.default.Component),VpFSwitch=exports.VpFSwitch=function(e){function t(){return(0,_classCallCheck3.default)(this,t),(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).apply(this,arguments))}return(0,_inherits3.default)(t,e),(0,_createClass3.default)(t,[{key:"render",value:function(){return _react2.default.createElement(FormItem,this.props,_react2.default.createElement(VpSwitch,this.props))}}]),t}(_react2.default.Component),VpCascader=exports.VpCascader=function(e){function t(){return(0,_classCallCheck3.default)(this,t),(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).apply(this,arguments))}return(0,_inherits3.default)(t,e),(0,_createClass3.default)(t,[{key:"render",value:function(){return _react2.default.createElement(_cascader2.default,this.props)}}]),t}(_react2.default.Component),VpFCascader=exports.VpFCascader=function(e){function t(){return(0,_classCallCheck3.default)(this,t),(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).apply(this,arguments))}return(0,_inherits3.default)(t,e),(0,_createClass3.default)(t,[{key:"render",value:function(){return _react2.default.createElement(FormItem,this.props,_react2.default.createElement(VpCascader,this.props))}}]),t}(_react2.default.Component),VpSlider=exports.VpSlider=function(e){function t(){return(0,_classCallCheck3.default)(this,t),(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).apply(this,arguments))}return(0,_inherits3.default)(t,e),(0,_createClass3.default)(t,[{key:"render",value:function(){return _react2.default.createElement(_slider2.default,this.props)}}]),t}(_react2.default.Component),VpFSlider=exports.VpFSlider=function(e){function t(){return(0,_classCallCheck3.default)(this,t),(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).apply(this,arguments))}return(0,_inherits3.default)(t,e),(0,_createClass3.default)(t,[{key:"render",value:function(){return _react2.default.createElement(FormItem,this.props,_react2.default.createElement(VpSlider,this.props))}}]),t}(_react2.default.Component),VpDatePicker=exports.VpDatePicker=function(e){function t(){return(0,_classCallCheck3.default)(this,t),(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).apply(this,arguments))}return(0,_inherits3.default)(t,e),(0,_createClass3.default)(t,[{key:"render",value:function(){return _react2.default.createElement(_datePicker2.default,this.props)}}]),t}(_react2.default.Component),VpFDatePicker=exports.VpFDatePicker=function(e){function t(){return(0,_classCallCheck3.default)(this,t),(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).apply(this,arguments))}return(0,_inherits3.default)(t,e),(0,_createClass3.default)(t,[{key:"render",value:function(){var t=this;return _react2.default.createElement("span",{ref:function(e){return t.container=e}},_react2.default.createElement(FormItem,this.props,_react2.default.createElement(VpDatePicker,(0,_extends3.default)({getCalendarContainer:function(e){return t.container}},this.props))))}}]),t}(_react2.default.Component),RangePicker=_datePicker2.default.RangePicker,VpMonthPicker=exports.VpMonthPicker=_datePicker2.default.MonthPicker,VpRangePicker=exports.VpRangePicker=function(e){function t(){return(0,_classCallCheck3.default)(this,t),(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).apply(this,arguments))}return(0,_inherits3.default)(t,e),(0,_createClass3.default)(t,[{key:"render",value:function(){return _react2.default.createElement(RangePicker,this.props)}}]),t}(_react2.default.Component),VpFRangePicker=exports.VpFRangePicker=function(e){function t(){return(0,_classCallCheck3.default)(this,t),(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).apply(this,arguments))}return(0,_inherits3.default)(t,e),(0,_createClass3.default)(t,[{key:"render",value:function(){return _react2.default.createElement(FormItem,this.props,_react2.default.createElement(VpRangePicker,this.props))}}]),t}(_react2.default.Component),VpTimePicker=exports.VpTimePicker=function(e){function t(){return(0,_classCallCheck3.default)(this,t),(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).apply(this,arguments))}return(0,_inherits3.default)(t,e),(0,_createClass3.default)(t,[{key:"render",value:function(){return _react2.default.createElement(_timePicker2.default,(0,_extends3.default)({getPopupContainer:function(e){return e}},this.props))}}]),t}(_react2.default.Component),VpFTimePicker=exports.VpFTimePicker=function(e){function t(){return(0,_classCallCheck3.default)(this,t),(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).apply(this,arguments))}return(0,_inherits3.default)(t,e),(0,_createClass3.default)(t,[{key:"render",value:function(){return _react2.default.createElement(FormItem,this.props,_react2.default.createElement(VpTimePicker,this.props))}}]),t}(_react2.default.Component),VpUpLoad=exports.VpUpLoad=_upload2.default,VpUpLoadDragger=exports.VpUpLoadDragger=_upload2.default.Dragger,VpFUpload=exports.VpFUpload=function(e){function t(){return(0,_classCallCheck3.default)(this,t),(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).apply(this,arguments))}return(0,_inherits3.default)(t,e),(0,_createClass3.default)(t,[{key:"render",value:function(){return _react2.default.createElement(FormItem,this.props,this.props.children)}}]),t}(_react2.default.Component),VpConfirm=exports.VpConfirm=_modal2.default.confirm,VpMInfo=exports.VpMInfo=_modal2.default.info,VpMSuccess=exports.VpMSuccess=_modal2.default.success,VpMError=exports.VpMError=_modal2.default.error,VpMWarning=exports.VpMWarning=_modal2.default.warning,VpModal=exports.VpModal=function(e){function r(e){(0,_classCallCheck3.default)(this,r);var t=(0,_possibleConstructorReturn3.default)(this,(r.__proto__||(0,_getPrototypeOf2.default)(r)).call(this,e));return t.showMaxMinRender=function(){$("#vpmodal_btn_"+t.generateId).length||($(".vpmodal_showmax_"+t.generateId).find(".ant-modal").css("max-height","100%"),$(".vpmodal_showmax_"+t.generateId).find(".ant-modal-content").prepend('<button id="vpmodal_btn_'+t.generateId+'" class="ant-modal-close vpmodal_btn_max"></button>'));try{_reactDom2.default.render(_react2.default.createElement(function(){return _react2.default.createElement(VpIcon,{type:t.state.showmax?"arrow-salt":"shrink",onClick:t.state.showmax?t.showMaxClick:t.showMinClick})},null),document.getElementById("vpmodal_btn_"+t.generateId))}catch(e){console.error("看到此提示建议在组件前添加判断，如：this.state.visible ? <VpModal >...</VpModal> : null",e)}t.modalMaxHeight()},t.showMaxClick=function(){t.setState({width:"100%",height:"100%",showmax:!t.state.showmax},function(){t.showMaxMinRender()}),"function"==typeof t.props.onMaxClick&&t.props.onMaxClick()},t.showMinClick=function(){t.setState({width:t.oldWidth,height:t.oldHeight,showmax:!t.state.showmax},function(){t.showMaxMinRender()}),"function"==typeof t.props.onMinClick&&t.props.onMinClick()},t.handleOk=function(){t.props.onOk&&t.props.onOk()},t.handleCancel=function(){t.props.onCancel&&t.props.onCancel(),t.setState({visible:!1})},t.state={visible:!1,showmax:!0,width:e.width?e.width:"520",height:e.style&&e.style.height&&"auto"!=e.style.height?e.style.height:e.height&&"auto"!=e.height?e.height:"80%"},t.oldWidth=e.width?e.width:"520",t.oldHeight=e.style&&e.style.height&&"auto"!=e.style.height?e.style.height:e.height&&"auto"!=e.height?e.height:"80%",t}return(0,_inherits3.default)(r,e),(0,_createClass3.default)(r,[{key:"componentWillMount",value:function(){this.addEventListener(),this.generateId=parseInt(1e4*Math.random())}},{key:"componentDidMount",value:function(){var e=this;this.props.visible&&(e.modalMaxHeight(),$(window).resize(function(){e.modalMaxHeight()})),this.props.showMaxIcon&&this.props.visible&&(console.log("看到此提示说明你组件使用方法加了判断，不错哟~~"),this.showMaxMinRender())}},{key:"componentWillReceiveProps",value:function(e){var t=this,r=this;if(e.visible)this.modalMaxHeight(),this.addEventListener(),$(window).resize(function(){r.modalMaxHeight()}),e.showMaxIcon&&setTimeout(function(){t.showMaxMinRender()},100);else{if(!this.handlerMD)return;this.removeEventListener()}e.style?e.style.height!=r.props.style.height&&r.setState({height:"auto"!=e.style.height?e.style.height:"80%"}):e.height!=r.props.height&&r.setState({height:"auto"!=e.height?e.height:"80%"})}},{key:"componentWillUnmount",value:function(){this.handlerMD&&this.removeEventListener()}},{key:"modalMaxHeight",value:function(){var s=this,e=this.props.timeout?this.props.timeout:50;setTimeout(function(){var l=$(window||top.window).outerHeight(),e=$(".ant-modal").not(".ant-confirm");$.map(e,function(e,t){var r=void 0===s.props.footer||""!=s.props.footer&&null!=s.props.footer?100:50;if(!$(e).is(":hidden")){var a=$(e).outerHeight(),o=$(e).children(".ant-modal-content").children(".ant-modal-body"),i=0<$(e).children(".ant-modal-content").children(".ant-modal-footer").length,n=0<o.find(".footFixed").length||0<o.find(".ant-modal-footer").length;n&&(r+=50),i||n||$(e).children(".ant-modal-content").css("padding-bottom",0),l<a?o.css({height:l-r+"px"}):o.css({height:a-r+"px"})}})},e)}},{key:"removeEventListener",value:function(){this.handlerMD.remove(),this.handlerMM.remove(),this.handlerML.remove()}},{key:"addEventListener",value:function(){this.handlerMD=(0,_addDomEventListener2.default)(document.body,"mousedown",function(e){"ant-modal-title"===e.target.className&&1==e.which&&(this.startX=e.clientX,this.startY=e.clientY,this.offsetX=e.offsetX,this.offsetY=e.offsetY,this.modalElement=e.target.parentElement.parentElement.parentElement)}),this.handlerMM=(0,_addDomEventListener2.default)(document.body,"mousemove",function(e){this.modalElement&&this.startX&&(this.moveX=e.clientX,this.moveY=e.clientY,this.modalElement.style.top=this.startY+this.moveY-this.startY-this.offsetY-14+"px",this.modalElement.style.left=this.startX+this.moveX-this.startX-this.offsetX-16+"px",this.modalElement.style.position="absolute")}),this.handlerML=(0,_addDomEventListener2.default)(document.body,"mouseup",function(e){this.startX=void 0,this.startY=void 0})}},{key:"render",value:function(){var t=this;return _react2.default.createElement(_modal2.default,(0,_extends3.default)({ref:function(e){return t.modalRef=e},onCancel:this.handleCancel,footer:void 0!==this.props.footer?this.props.footer:_react2.default.createElement("div",{className:"text-center"},_react2.default.createElement(VpButton,{type:"primary",className:"vp-btn-br",loading:this.props.loading,onClick:this.handleOk},this.props.okText||vp.config.initFooterText&&vp.config.initFooterText.okText||"确定"),_react2.default.createElement(VpButton,{type:"ghost",className:"vp-btn-br",onClick:this.handleCancel},this.props.cancelText||vp.config.initFooterText&&vp.config.initFooterText.cancelText||"取消")),visible:this.state.visible},this.props,{width:this.state.width,height:this.state.height,wrapClassName:(this.props.wrapClassName?this.props.wrapClassName:"")+(this.props.showMaxIcon?" vpmodal_showmax_"+this.generateId:"")+(void 0===this.props.footer||""!=this.props.footer&&null!=this.props.footer?"":" nofooter")}),this.props.children)}}]),r}(_react2.default.Component),VpFCollapse=exports.VpFCollapse=_collapse2.default,VpPanel=exports.VpPanel=_collapse2.default.Panel,VpCollapse=exports.VpCollapse=function(e){function r(e){(0,_classCallCheck3.default)(this,r);var t=(0,_possibleConstructorReturn3.default)(this,(r.__proto__||(0,_getPrototypeOf2.default)(r)).call(this,e));return t.state={content:_react2.default.createElement(VpPanel,t.props,t.props.panelText)},t}return(0,_inherits3.default)(r,e),(0,_createClass3.default)(r,[{key:"componentWillMount",value:function(){if(this.props.panels){var t=[];this.props.panels.map(function(e){t.push(_react2.default.createElement(VpPanel,e,e.panelText))}),this.setState({content:t})}}},{key:"render",value:function(){return _react2.default.createElement(_collapse2.default,this.props,this.state.content)}}]),r}(_react2.default.Component),EditableCol=exports.EditableCol=function(e){function l(){var e,t,a,r;(0,_classCallCheck3.default)(this,l);for(var o=arguments.length,i=Array(o),n=0;n<o;n++)i[n]=arguments[n];return(t=a=(0,_possibleConstructorReturn3.default)(this,(e=l.__proto__||(0,_getPrototypeOf2.default)(l)).call.apply(e,[this].concat(i)))).state={value:a.props.value,editable:!1,content:""},a.handleChange=function(e){var t=e.target.value;""==!t&&a.setState({value:t})},a.onChange=function(e,t){""==!t&&a.setState({value:t})},a.selectChange=function(e){a.setState({value:e})},a.check=function(){a.setState({editable:!1}),a.props.onChange&&a.props.onChange(a.state.value)},a.edit=function(){var e=a.state;e.value,e.editable;a.setState({editable:!0});var t=a.refs.hidden.props.value;if("String"==t)a.setState({content:_react2.default.createElement(VpInput,{defaultValue:a.state.value,onChange:a.handleChange,onPressEnter:a.check})});else if("Date"==t)a.setState({content:_react2.default.createElement(VpDatePicker,{defaultValue:a.state.value,onChange:a.onChange,onPressEnter:a.check})});else if("Select"==t){var r=[];a.props.selectData.map(function(e){r.push(_react2.default.createElement(VpOption,{key:e.value,value:e.value},e.text))}),a.setState({content:_react2.default.createElement(VpSelect,{defaultValue:a.state.value,style:{width:110},onChange:a.selectChange},r)})}},r=t,(0,_possibleConstructorReturn3.default)(a,r)}return(0,_inherits3.default)(l,e),(0,_createClass3.default)(l,[{key:"render",value:function(){var e=this.state,t=e.value,r=e.editable;return _react2.default.createElement("div",{className:"editable-cell"},r?_react2.default.createElement("div",{className:"editable-cell-input-wrapper"},this.state.content,_react2.default.createElement(VpIcon,{type:"check",className:"editable-cell-icon-check",onClick:this.check})):_react2.default.createElement("div",{className:"editable-cell-text-wrapper"},t||" ",_react2.default.createElement(VpInput,{ref:"hidden",type:"hidden",value:this.props.type}),_react2.default.createElement(VpIcon,{type:"edit",className:"editable-cell-icon",onClick:this.edit})))}}]),l}(_react2.default.Component),VpEditColTable=exports.VpEditColTable=function(e){function r(e){(0,_classCallCheck3.default)(this,r);var t=(0,_possibleConstructorReturn3.default)(this,(r.__proto__||(0,_getPrototypeOf2.default)(r)).call(this,e));return t.state={tableHeader:""},t}return(0,_inherits3.default)(r,e),(0,_createClass3.default)(r,[{key:"componentWillMount",value:function(){var a=this,t=[],o=this.props.tableHeader;if(this.props.editTableCol)for(var e=function(r){for(var e in o[r]){t.push({title:o[r][e],dataIndex:e,width:"25%",render:function(e,t){return _react2.default.createElement(EditableCol,{selectData:a.props.selectData,type:o[r].type,value:e})}});break}},r=0;r<o.length;r++)e(r);else for(r=0;r<o.length;r++)for(var i in o[r]){t.push({title:o[r][i],dataIndex:i});break}this.setState({tableHeader:t})}},{key:"componentDidMount",value:function(){var a=this;this.props.resize&&function(){for(var t=void 0,r=_reactDom2.default.findDOMNode(a.refs.vpTable).getElementsByTagName("table")[0],e=0;e<r.rows[0].cells.length;e++)r.rows[0].cells[e].onmousedown=function(){t=this,event.offsetX>t.offsetWidth-10&&(t.mouseDown=!0,t.oldX=event.x,t.oldWidth=t.offsetWidth)},r.rows[0].cells[e].onmouseup=function(){null==t&&(t=this),t.mouseDown=!1,t.style.cursor="default"},r.rows[0].cells[e].onmousemove=function(){if(event.offsetX>this.offsetWidth-10?this.style.cursor="col-resize":this.style.cursor="default",null==t&&(t=this),null!=t.mouseDown&&1==t.mouseDown){for(t.style.cursor="default",0<t.oldWidth+(event.x-t.oldX)&&(t.width=t.oldWidth+(event.x-t.oldX)),t.style.width=t.width,t.style.cursor="col-resize",r=t;"TABLE"!=r.tagName;)r=r.parentElement;for(var e=0;e<r.rows.length;e++)r.rows[e].cells[t.cellIndex].width=t.width}}}()}},{key:"render",value:function(){return _react2.default.createElement(_table2.default,(0,_extends3.default)({columns:this.state.tableHeader},this.props,{ref:"vpTable"}))}}]),r}(_react2.default.Component);function generateId(){for(var e="vp_tbale_cell_"+parseInt(1e3*Math.random()),t=document.getElementById(e);t;)e="vp_tbale_cell_"+parseInt(1e3*Math.random()),t=document.getElementById(e);return e}var VpTable=exports.VpTable=_VpDTable.VpDTable1,EditTableCol=exports.EditTableCol=_VpEditTableCol.EditTableCol1,VpTable1=exports.VpTable1=function(e){function t(e){(0,_classCallCheck3.default)(this,t);var n=(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).call(this,e));return n.getTableData=function(){if(n.props.dataUrl&&!n.props.waitParam){var e=n.state,r=e.currentPage,a=e.numPerPage,t=e.sortfield,o=e.sorttype;("GET"===n.props.queryMethod?vpQuery:vpAdd)(n.props.dataUrl,(0,_extends3.default)({sortfield:t,sorttype:o,currentPage:r,numPerPage:a},n.state.params)).then(function(e){var t=e.data;n.setState({data:t.resultList,currentPage:t.currentPage||r,totalRows:t.totalRows,numPerPage:t.numPerPage||a}),n.props.controlAddButton&&n.props.controlAddButton(t.numPerPage,t.resultList)})}},n.tableChange=function(e,t,r){var a=n.state,o=a.sorttype,i=a.sortfield;r.order&&r.field&&("descend"===r.order?o="desc":"ascend"===r.order&&(o="asc"),i=r.field),n.setState({currentPage:e.currentPage||1,sortfield:i,sorttype:o,numPerPage:e.numPerPage||n.state.numPerPage},function(){n.getTableData()}),n.props.onChange&&n.props.onChange(e,t,r)},n.pageChange=function(e){n.tableChange({currentPage:e,numPerPage:n.state.numPerPage},{},{})},n.onShowSizeChange=function(e,t){n.tableChange({currentPage:e,numPerPage:t},{},{})},n.setTableData=function(t){n.setState({data:t},function(){if(n.props.scroll){var e=n.props.scroll.y;t.length}})},n.getCurrentData=function(){return n.state.data},n.onRowClick=function(e,t,r){var a=n.props,o=a.onRowClick,i=a.onDoubleClick;n.clickcount=n.clickcount+1,n.timeout&&clearTimeout(n.timeout),n.timeout=setTimeout(function(){n.clickcount=0,o&&o(e,t,r)},250),1<n.clickcount&&i&&(i(e,t,r),clearTimeout(n.timeout),n.clickcount=0)},n.state={data:[],currentPage:1,numPerPage:10,sortfield:"",sorttype:"",params:n.props.params},n}return(0,_inherits3.default)(t,e),(0,_createClass3.default)(t,[{key:"componentWillMount",value:function(){this.addWidth=0,this.tableSty={},this.generateId=generateId(),this.props.dataUrl&&this.getTableData()}},{key:"componentDidMount",value:function(){this.initResize()}},{key:"componentWillUpdate",value:function(e){var t=document.getElementById(this.generateId).clientWidth,r=0;if(this.totalWidth<t&&(r=this.props.columns?this.props.columns.length:this.props.columnsData.length+(this.props.optionsCol?1:0),!this.addWidth&&1<r)){var a=r?(t-this.totalWidth)/r:0;this.addWidth=a!=this.addWidth?a:this.addWidth}}},{key:"componentDidUpdate",value:function(){this.initResize()}},{key:"initResize",value:function(){if(this.props.resize){var e=_reactDom2.default.findDOMNode(this.refs.vpTable).getElementsByTagName("table");2<=e.length?this.tableResize(e[0],e[1]):this.tableResize(e[0])}}},{key:"tableResize",value:function(p,d){if(!p||0===p.rows.length||d&&0===d.rows.length)return!1;for(var u=p.getElementsByTagName("colgroup")[0].childNodes||[],c=d&&d.getElementsByTagName("colgroup")[0].childNodes||[],f=this,h=void 0,_=parseInt(p.style.width),e=0;e<p.rows[0].cells.length;e++){p.rows[0].cells[e].onmousedown=function(e){var t=e||event;t.clientX;h=this,document.body.style.cursor="col-resize",t.offsetX>h.offsetWidth-10&&(h.mouseDown=!0,h.oldX=t.clientX,h.oldWidth=h.offsetWidth),document.onmousemove=function(e){window.getSelection?window.getSelection().removeAllRanges():document.selection.empty();var t=e||event,r=!!f.props.rowSelection;null==h&&(h=h);var a=r?h.cellIndex-1:h.cellIndex;if(null!=h.mouseDown&&1==h.mouseDown){if(0<h.oldWidth+(t.clientX-h.oldX)){h.width=h.oldWidth+(t.clientX-h.oldX);var o=_+(t.clientX-h.oldX)+"px";p.style.width=o,d&&(d.style.width=o),_=o}for(;"TABLE"!=p.tagName;)p=p.parentElement;for(var i=0;i<p.rows.length;i++)p.rows[i].cells[h.cellIndex].width=h.width,d&&d.rows[i].cells[h.cellIndex]&&(d.rows[i].cells[h.cellIndex].width=h.width),u[h.cellIndex]&&(u[h.cellIndex].style.width=h.width+"px"),c[h.cellIndex]&&(c[h.cellIndex].style.width=h.width+"px"),u[h.cellIndex]&&(u[h.cellIndex].style.minWidth=h.width+"px"),c[h.cellIndex]&&(c[h.cellIndex].style.minWidth=h.width+"px"),u[h.cellIndex]&&(u[h.cellIndex].width=h.width+"px"),c[h.cellIndex]&&(c[h.cellIndex].width=h.width+"px"),$("th."+f.generateId+"_"+a+" span")[i].style.width=h.width-10+"px";if(f.tableSty["."+f.generateId+"_"+a+" .cell-w"]=h.width-10+"px",0<$("style."+f.generateId).length){var n="";for(var l in f.tableSty)n+=l+"{width: "+f.tableSty[l]+"  !important;}";$("style."+f.generateId).html(n)}else{var s=document.createElement("style");s.type="text/css",s.className=""+f.generateId,s.innerHTML="."+f.generateId+"_"+a+" .cell-w{width: "+(h.width-10)+"px !important}",document.getElementsByTagName("head").item(0).appendChild(s)}}}},document.onmouseup=function(){(document.onmousemove=null)==h&&(h=this),h.mouseDown=!1,document.body.style.cursor="default"}}}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.dataUrl&&e.params&&(0,_stringify2.default)(e.params)!==(0,_stringify2.default)(this.state.params)&&this.setState({params:e.params,currentPage:1},function(){t.getTableData()})}},{key:"render",value:function(){var i=this;window.tableFiexedScroll&&window.tableFiexedScroll();var r=this.props.bindThis,e=this.props.emptyData?_react2.default.createElement("div",{className:"full-height text-center f14"},_react2.default.createElement(VpIcon,{type:"frown"})," 暂无数据"):_react2.default.createElement("div",{className:"full-height"},_react2.default.createElement("div",{className:"nodata"})),t=this.props.scroll,a=void 0===t?{}:t;return this.totalWidth=0,this.columns=this.props.columns.map(function(o,e){return i.totalWidth+=parseInt(o.width||100)+i.addWidth,(0,_extends3.default)({},o,{className:(o.className||"")+" "+i.generateId+"_"+e+" "+("right"==o.fixed&&"vp_table_fixed_r"),width:parseInt(o.width||100)+i.addWidth,render:function(e,t,r){var a=!!o.render&&o.render(e,t,r);return"object"==(void 0===a?"undefined":(0,_typeof3.default)(a))&&a.children?"{}"===(0,_stringify2.default)(a.props)?_react2.default.createElement("div",{className:"cell-w",style:{width:parseInt(o.width||100)+i.addWidth-10+"px"}},e):{props:a.props,children:_react2.default.createElement("div",{className:"cell-w",style:{width:parseInt(o.width||100)+i.addWidth-10+"px"}},a.children)}:_react2.default.createElement("div",{className:"cell-w",style:{width:parseInt(o.width||100)+i.addWidth-10+"px"}},o.render?a:e)}})}),_react2.default.createElement("div",{id:this.generateId},this.props.dataUrl?_react2.default.createElement("div",{className:"bg-white bottom-icon"},_react2.default.createElement(_table2.default,(0,_extends3.default)({},this.props,{columns:this.columns,scroll:{x:this.totalWidth||!0,y:a.y||!0},onRowClick:this.onRowClick,pagination:!1,dataSource:this.state.data,onChange:this.tableChange,size:"middle",ref:"vpTable",locale:{emptyText:e},className:this.props.resize?this.props.className?this.props.className+" vp-table-resize":"vp-table-resize":this.props.className?this.props.className:""})),_react2.default.createElement("div",{className:"clearfix m-sm m-b-none"},_react2.default.createElement("div",{className:"fl"},_react2.default.createElement("div",{className:"page-options-wrapper"},this.props.tableOptions?this.props.tableOptions.map(function(e,t){return e.tooltip?_react2.default.createElement("span",{className:"p-r-sm",key:t},_react2.default.createElement(VpPopconfirm,{title:e.comfirmTitle,okText:e.okText||"确定",cancelText:e.cancelText||"取消",onConfirm:"function"==typeof e.comfirmFunction?e.comfirmFunction.bind(r):function(){},onCancel:"function"==typeof e.cancelFunction?e.cancelFunction.bind(r):function(){}},_react2.default.createElement(VpTooltip,{placement:e.placement||"top",title:e.title||""},_react2.default.createElement(VpIcon,{className:e.className,type:e.type||"reload",onClick:"function"==typeof e.iconClickFunction?e.iconClickFunction.bind(r):function(){}})))):_react2.default.createElement("span",{className:"p-r-sm",key:t},_react2.default.createElement(VpTooltip,{placement:e.placement||"top",title:e.title||""},_react2.default.createElement(VpIcon,{className:e.className,type:e.type||"reload",onClick:"function"==typeof e.iconClickFunction?e.iconClickFunction.bind(r):function(){}})))}):null)),_react2.default.createElement("div",{className:"fr"},!1!==this.props.pagination?this.props.showTotal?_react2.default.createElement("span",null,"共 ",this.state.totalRows||"0"," 条"):_react2.default.createElement(VpPagination,(0,_extends3.default)({current:this.state.currentPage,total:this.state.totalRows,showTotal:function(e){return"共 "+e+" 条"},showSizeChanger:!0,onShowSizeChange:this.onShowSizeChange,pageSize:this.state.numPerPage,showQuickJumper:!0,onChange:this.pageChange},this.props.customPagination)):null))):_react2.default.createElement(_table2.default,(0,_extends3.default)({},this.props,{columns:this.columns,scroll:{x:this.totalWidth||!0,y:a.y||!0},onRowClick:this.onRowClick,pagination:!1!==this.props.pagination&&(0,_extends3.default)({size:"big"},this.props.pagination),size:"middle",ref:"vpTable",locale:{emptyText:e},className:this.props.resize?this.props.className?this.props.className+" vp-table-resize":"vp-table-resize":this.props.className?this.props.className:""})))}}]),t}(_react2.default.Component);VpTable1.defaultProps={resize:!0};var VpMsgInfo=exports.VpMsgInfo=_VpMessage2.default.info,VpMsgSuccess=exports.VpMsgSuccess=_VpMessage2.default.success,VpMsgError=exports.VpMsgError=_VpMessage2.default.error,VpMsgWarning=exports.VpMsgWarning=_VpMessage2.default.warning,VpMsgLoading=exports.VpMsgLoading=_VpMessage2.default.loading,VpPopconfirm=exports.VpPopconfirm=_popconfirm2.default,VpMenuItem=exports.VpMenuItem=_menu2.default.Item,VpSubMenu=exports.VpSubMenu=_menu2.default.SubMenu,VpMenuItemGroup=exports.VpMenuItemGroup=_menu2.default.ItemGroup,VpMenu=exports.VpMenu=_menu2.default,VpTransfer=exports.VpTransfer=_transfer2.default,VpTreeNode=exports.VpTreeNode=_treeSelect2.default.TreeNode,VP_SHOW_ALL=exports.VP_SHOW_ALL=_treeSelect2.default.SHOW_ALL,VP_SHOW_PARENT=exports.VP_SHOW_PARENT=_treeSelect2.default.SHOW_PARENT,VP_SHOW_CHILD=exports.VP_SHOW_CHILD=_treeSelect2.default.SHOW_CHILD,VpTreeSelect=exports.VpTreeSelect=function(e){function r(e){(0,_classCallCheck3.default)(this,r);var t=(0,_possibleConstructorReturn3.default)(this,(r.__proto__||(0,_getPrototypeOf2.default)(r)).call(this,e));return _initialiseProps.call(t),t.state={loopData:null},t}return(0,_inherits3.default)(r,e),(0,_createClass3.default)(r,[{key:"componentWillMount",value:function(){this.getOptions()}},{key:"componentWillReceiveProps",value:function(e){this.getOptions(e)}},{key:"render",value:function(){var e=this.props,t=e.url,r=e.children,a=(e.treeData,this.state.loopData);return _react2.default.createElement(_treeSelect2.default,this.props,t&&a?this.loopTreeData(a):r)}}]),r}(_react2.default.Component);VpTreeSelect.defaultProps={params:{},method:"GET"};var _initialiseProps=function(){var i=this;this.getOptions=function(e){var t=e||i.props,r=t.url,a=t.params,o=t.method;r&&("POST"===o?vpAdd:vpQuery)(r,a).then(function(e){e.data[0].value?i.setState({loopData:e.data}):console.error("radio 数据格式不匹配")})},this.loopTreeData=function(e){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return e.map(function(e,t){var r=o+"-"+t,a={title:e.label,value:e.value||String(e.key||e.label),key:e.key||e.value||r,disabled:e.disabled||!1,selectable:!e.hasOwnProperty("selectable")||e.selectable,item:e};return e.children&&e.children.length?_react2.default.createElement(VpTreeNode,a,i.loopTreeData(e.children,r)):_react2.default.createElement(VpTreeNode,(0,_extends3.default)({},a,{isLeaf:e.isLeaf}))})}},VpDropdown=exports.VpDropdown=function(e){function t(){return(0,_classCallCheck3.default)(this,t),(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).apply(this,arguments))}return(0,_inherits3.default)(t,e),(0,_createClass3.default)(t,[{key:"render",value:function(){return _react2.default.createElement(_dropdown2.default,(0,_extends3.default)({getPopupContainer:function(e){return e.parentNode}},this.props),this.props.children)}}]),t}(_react2.default.Component);VpDropdown.Button=_dropdown2.default.Button;var VpPagination=exports.VpPagination=_pagination2.default,VpTree=exports.VpTree=_VpTree.NewTree,VpTimeline=exports.VpTimeline=_timeline2.default,VpProgress=exports.VpProgress=_progress2.default,VpTooltip=exports.VpTooltip=_tooltip2.default,VpTag=exports.VpTag=_tag2.default,VpAlert=exports.VpAlert=_alert2.default,VpBadge=exports.VpBadge=_badge2.default,VpCard=exports.VpCard=_card2.default,VpCalendar=exports.VpCalendar=function(e){function t(e){(0,_classCallCheck3.default)(this,t);var r=(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).call(this,e));return r.onSelect=function(e){r.props.onSelect&&r.props.onSelect(e,r.selectDom)},r.init=function(){r.props.init&&r.props.init()},r.onPanelChange=function(e,t){r.props.onPanelChange&&r.props.onPanelChange(e,t)},r}return(0,_inherits3.default)(t,e),(0,_createClass3.default)(t,[{key:"componentDidMount",value:function(){var t=this;$(".ant-fullcalendar").on("click",".ant-fullcalendar-cell",function(e){t.selectDom=e.currentTarget}),this.init()}},{key:"componentDidUpdate",value:function(){this.init()}},{key:"render",value:function(){return _react2.default.createElement(_calendar2.default,(0,_extends3.default)({},this.props,{onSelect:this.onSelect,onPanelChange:this.onPanelChange}))}}]),t}(_react2.default.Component),VpTabs=exports.VpTabs=_tabs2.default,VpTabPane=exports.VpTabPane=_tabs2.default.TabPane,VpSteps=exports.VpSteps=_steps2.default,VpQueueAnim=exports.VpQueueAnim=_rcQueueAnim2.default,VpLocaleProvider=exports.VpLocaleProvider=_localeProvider2.default,VpIframeRouter=exports.VpIframeRouter=function(e){function t(){return(0,_classCallCheck3.default)(this,t),(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).apply(this,arguments))}return(0,_inherits3.default)(t,e),(0,_createClass3.default)(t,[{key:"render",value:function(){var e=this.props.location.state?this.props.location.state.url:"/dashboard.html";return e=vp.cookie.joinToken(vp.gateway.handleGateWay(e)),_react2.default.createElement("iframe",{className:this.props.className?this.props.className+" container-iframe":"container-iframe",src:e})}}]),t}(_react2.default.Component),VpIframe=exports.VpIframe=function(e){function t(){return(0,_classCallCheck3.default)(this,t),(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).apply(this,arguments))}return(0,_inherits3.default)(t,e),(0,_createClass3.default)(t,[{key:"render",value:function(){var e=this.props.url;return e=vp.cookie.joinToken(vp.gateway.handleGateWay(e)),_react2.default.createElement("iframe",{className:this.props.className?this.props.className+" container-iframe":"container-iframe",src:e})}}]),t}(_react2.default.Component),VpLink=exports.VpLink=function(e){function t(){return(0,_classCallCheck3.default)(this,t),(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).apply(this,arguments))}return(0,_inherits3.default)(t,e),(0,_createClass3.default)(t,[{key:"render",value:function(){var e=this.props.url;return e=vp.cookie.joinToken(vp.gateway.handleGateWay(e)),_react2.default.createElement("a",(0,_extends3.default)({href:e},this.props),this.props.children)}}]),t}(_react2.default.Component),VpUploader=exports.VpUploader=_VpUploader2.default,VpFUploader=exports.VpFUploader=function(e){function t(e){var o=this;(0,_classCallCheck3.default)(this,t);var r,n=(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).call(this,e));return n.findFileIdx=function(t){return n.state.childNodes.slice(0).findIndex(function(e){return e.id==(t.id?t.id:t)})},n.removeFile=function(t){var e=n.props.form,r=e.setFieldsValue,a=(e.getFieldValue,n.state.childNodes.slice(0)),o=a.findIndex(function(e){return t==e.fileid});n.setState({childNodes:[].concat((0,_toConsumableArray3.default)(a.slice(0,o)),(0,_toConsumableArray3.default)(a.slice(o+1)))},function(){var e=n.state.childNodes.slice(0).map(function(e){return e.fileid}).join(",");r((0,_defineProperty3.default)({},n.props.item.field_name,e))})},n.chooseFileOptions=function(e){var t=n.props.item,r=t.disabled,a=t.readonly;return"progress"==e.status?_react2.default.createElement("div",null,_react2.default.createElement(VpIcon,{type:"clock-circle",className:"text-warning p-r-sm"}),_react2.default.createElement("b",null,e.filename),_react2.default.createElement("div",{className:"upload-option"},_react2.default.createElement("div",{className:"progress"},_react2.default.createElement("span",{className:"text"},(100*e.percentage).toFixed(2),"%"),_react2.default.createElement("span",{className:"percentage",style:{width:e.percentage}})))):"complete"==e.status||e.options?(e.options.preview=window.vp.config.fileViewOptions.fileView,e.options.edit=window.vp.config.fileEditOptions.fileEdit,_react2.default.createElement("div",null,_react2.default.createElement(VpIcon,{type:"check-circle",className:"text-success p-r-sm"}),_react2.default.createElement("b",null,e.filename),e.options?_react2.default.createElement("div",{className:"upload-option"},!e.options.delete||r||a?null:_react2.default.createElement("span",{onClick:n.removeFile.bind(n,e.fileid)},"删除"),e.options.download&&e.entityid&&0<e.instanceid||e.options.download&&!e.entityid?_react2.default.createElement("span",{onClick:n.downloadFile.bind(n,{fileid:vp.encrypt.aesEncrypt(e.fileid,"rSzSK900KLMxOgZ/"),entityid:e.entityid,instanceid:e.instanceid})},"下载"):null,e.options.preview&&e.entityid&&0<e.instanceid||e.options.preview&&!e.entityid?_react2.default.createElement("span",{onClick:n.preView.bind(n,e)},"预览"):null,e.options.edit&&!r&&!a&&e.entityid&&0<e.instanceid||e.options.edit&&!r&&!a&&!e.entityid?_react2.default.createElement("span",{onClick:n.editonline.bind(n,e)},"编辑"):null,!e.options.update||r||a?null:_react2.default.createElement("span",{onClick:n.updateFile.bind(n,e.fileid,e.doctype)},"更新")):null)):"error"==e.status?_react2.default.createElement("div",null,_react2.default.createElement(VpIcon,{type:"cross-circle",className:"text-danger p-r-sm"}),_react2.default.createElement("b",null,e.filename),_react2.default.createElement("div",{className:"upload-option"},_react2.default.createElement("span",{"data-id":e.id,onClick:n.removeFile},"删除"))):void 0},n.updateFile=function(e,t,r){n.updateid=e,n.setState({fileNumLimit:1,params:{fileid:e},visible:!0,selectType:t})},n.getFileType=function(e){return e.substring(e.lastIndexOf(".")+1)},n.asyncGet=function(r,a){return new _promise2.default(function(t){setTimeout(function(){console.log("0002");var e=vpAdd(r,a);t(e)},500)})},n.asyncFun=(r=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(t,r){var a;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("0001"),e.next=3,n.asyncGet(t,r);case 3:return a=e.sent,console.log("0003",a),e.abrupt("return",a);case 6:case"end":return e.stop()}},e,o)})),function(e,t){return r.apply(this,arguments)}),n.parseDoc=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};(0,n.refs.parseProgress.startParse)(e,function(){t()}),console.log("parseDoc",e)},n.preView=function(e){var t=vp.encrypt.aesEncrypt(e.fileid,"rSzSK900KLMxOgZ/"),r=e.filename||e.name,a=n.getFileType(r),o=e.entityid,i=e.instanceid;-1!=window.vp.config.fileViewOptions.fileType.indexOf(a)?(n.setState({progressVisible:!0}),n.asyncFun(window.vp.config.fileViewOptions.fileInfoUrl,{fileid:t,entityid:o,instanceid:i}).then(function(e){n.setState({progressVisible:!1}),console.log("0004",e),!window.vp.config.fileViewOptions.fileCheck||e.data.isExists?e.data&&e.data.hasOwnProperty("extractstatus")?2==e.data.extractstatus?window.open(window.vp.config.fileViewOptions.viewUrl+"?authcode=doc_edit&fileid="+t+"&entityid="+o+"&instanceid="+i+"&filename="+encodeURIComponent(encodeURIComponent(r))+"&fullfilename="+e.data.fullfilename):0==e.data.extractstatus?n.parseDoc(e.data.docId,function(){window.open(window.vp.config.fileViewOptions.viewUrl+"?authcode=doc_edit&fileid="+t+"&entityid="+o+"&instanceid="+i+"&filename="+encodeURIComponent(encodeURIComponent(r))+"&fullfilename="+e.data.fullfilename)}):1==e.data.extractstatus&&VpAlertMsg({message:"提示",description:"文件正在解析,请稍后点击...",type:"warn",closeText:"关闭",showIcon:!0},3):window.open(window.vp.config.fileViewOptions.viewUrl+"?fileid="+t+"&entityid="+o+"&instanceid="+i+"&filename="+encodeURIComponent(encodeURIComponent(r))+"&fullfilename="+e.data.fullfilename):VpAlertMsg({message:"消息提示",description:"该文件不存在",type:"warning",closeText:"关闭",showIcon:!0},3)}).catch(function(e){n.setState({progressVisible:!1})})):VpAlertMsg({message:"消息提示",description:"不支持"+a+"格式文件的预览",type:"info",closeText:"关闭",showIcon:!0},3)},n.editonline=function(t){var e=vp.encrypt.aesEncrypt(t.fileid,"rSzSK900KLMxOgZ/"),r=t.filename||t.name,a=n.getFileType(r),o=t.entityid,i=t.instanceid;-1!=window.vp.config.fileEditOptions.fileEditType.indexOf(a)?(n.setState({progressVisible:!0}),n.asyncFun(window.vp.config.fileEditOptions.editDocUrl,{fileid:e,entityid:o,instanceid:i}).then(function(e){n.setState({progressVisible:!1}),!window.vp.config.fileEditOptions.fileEditCheck||e.data.docId?(console.log("edit",t,e),e.data&&e.data.hasOwnProperty("extractstatus")?2==e.data.extractstatus?window.open(window.vp.config.fileEditOptions.editUrl+"&docId="+vp.encrypt.aesEncrypt(e.data.docId,"rSzSK900KLMxOgZ/")):0==e.data.extractstatus?n.parseDoc(e.data.docId,function(){window.open(window.vp.config.fileEditOptions.editUrl+"&docId="+vp.encrypt.aesEncrypt(e.data.docId,"rSzSK900KLMxOgZ/"))}):1==e.data.extractstatus&&VpAlertMsg({message:"提示",description:"文件正在解析,请稍后点击...",type:"warn",closeText:"关闭",showIcon:!0},3):window.open(window.vp.config.fileEditOptions.editUrl+"&docId="+vp.encrypt.aesEncrypt(e.data.docId,"rSzSK900KLMxOgZ/"))):VpAlertMsg({message:"消息提示",description:"该文件不存在",type:"warning",closeText:"关闭",showIcon:!0},3)}).catch(function(e){n.setState({progressVisible:!1})})):VpAlertMsg({message:"消息提示",description:"不支持"+a+"格式文件的编辑",type:"info",closeText:"关闭",showIcon:!0},3)},n.cancelModal=function(){n.setState({progressVisible:!1})},n.downloadFile=function(e){vpDownLoad(n.downloadUrl,e)},n.uploadFile=function(){n.setState({visible:!0,selectType:"",dataSource:[]})},n.handleCancel=function(){n.updateid="",n.setState({visible:!1,fileNumLimit:300})},n.handleOk=function(){var e=n.props.form,t=e.setFieldsValue,r=(e.getFieldValue,n.refs.uploadModal.getUploaderQueue()),a=[].concat((0,_toConsumableArray3.default)(n.state.childNodes));if(n.updateid){var o=a.findIndex(function(e){return n.updateid==e.fileid});-1!==o&&(a[o]=r[0]),n.updateid=""}else a=[].concat((0,_toConsumableArray3.default)(n.state.childNodes),(0,_toConsumableArray3.default)(r));n.setState({visible:!1,fileNumLimit:300,childNodes:a},function(){var e="";e=n.props.item.widget.select_type?(e=n.state.childNodes.slice(0).map(function(e){return{id:e.fileid,type:e.doctype}}),(0,_stringify2.default)(e)):n.state.childNodes.slice(0).map(function(e){return e.fileid}).join(","),t((0,_defineProperty3.default)({},n.props.item.field_name,e))})},n.state={childNodes:[],updateid:"",progressVisible:!1,tips:"",loading:!1,visible:!1,fileNumLimit:300,defaultValue:n.props.dafaultFileType||"",params:{},selectType:"",dataSource:[],columns:[{title:"序号",dataIndex:"num",key:"num",width:60},{title:"附件名称",dataIndex:"name",key:"name",auto:!0},{title:"版本",dataIndex:"version",key:"version",width:60},{title:"上传日期",dataIndex:"date",key:"date",width:150},{title:"上传人",dataIndex:"people",key:"people",width:120},{title:"操作",key:"todo",width:150,render:function(e,t){var r=t;r.options.preview=window.vp.config.fileViewOptions.fileView,r.options.edit=window.vp.config.fileEditOptions.fileEdit;var a=n.props.item,o=a.disabled,i=a.readonly;return _react2.default.createElement("div",{className:"upload-option"},r.options.download&&r.entityid&&0<r.instanceid||r.options.download&&!r.entityid?_react2.default.createElement(VpTooltip,{title:"下载"},_react2.default.createElement(VpIconFont,{type:"text-primary m-lr-xs cursor vpicon-clouddownloado",onClick:n.downloadFile.bind(n,{fileid:vp.encrypt.aesEncrypt(r.fileid,"rSzSK900KLMxOgZ/"),entityid:r.entityid,instanceid:r.instanceid})})):null,!r.options.update||o||i?null:_react2.default.createElement(VpTooltip,{title:"更新"},_react2.default.createElement(VpIconFont,{type:"text-primary m-lr-xs cursor vpicon-clouduploado",onClick:n.updateFile.bind(n,r.fileid,r.doctype,!0)})),!r.options.delete||o||i?null:_react2.default.createElement(VpTooltip,{title:"删除"},_react2.default.createElement(VpIconFont,{type:"text-danger m-lr-xs cursor vpicon-shanchu",onClick:n.removeFile.bind(n,r.fileid)})),r.options.preview&&r.entityid&&0<r.instanceid||r.options.preview&&!r.entityid?_react2.default.createElement(VpTooltip,{title:"预览"},_react2.default.createElement(VpIconFont,{type:"text-primary m-lr-xs cursor vpicon-see-o",onClick:n.preView.bind(n,r)})):null,r.options.edit&&!o&&!i&&r.entityid&&0<r.instanceid||r.options.edit&&!o&&!i&&!r.entityid?_react2.default.createElement(VpTooltip,{title:"编辑"},_react2.default.createElement(VpIconFont,{type:"text-primary m-lr-xs cursor vpicon-edit",onClick:n.editonline.bind(n,r)})):null)}}]},n}return(0,_inherits3.default)(t,e),(0,_createClass3.default)(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.item,r=e.downloadUrl,a=e.uploadUrl,o=this.props.item,i=o.filestyle,n=o.ischosefiletype;1==i&&1==n&&this.state.columns.splice(2,0,{title:"附件类型",dataIndex:"type",width:165});var l=t.widget.load_template||[];l.map(function(e,t){e.id||(l[t].id=l[t].fileid)}),this.setState({childNodes:l,fileTypes:t.widget.select_type||[]}),this.uploadUrl=t.widget&&t.widget.upload_url||a||window.vp.config.URL.upload,this.downloadUrl=vp.gateway.handleGateWay(t.widget&&t.widget.download_url||r||window.vp.config.URL.download)}},{key:"componentDidMount",value:function(){var p=this,d=this,e=_webuploader2.default.create({swf:"../vpstatic/plugins/webUploader/Uploader.swf",disableGlobalDnd:!0,timeout:0,auto:!0,server:vp.gateway.handleGateWay(this.uploadUrl||"/{vpcloud}/upload"),pick:{id:this.refs.upload,multiple:!1}});e.on("dndAccept",function(e){}),e.on("fileQueued",function(a){e.makeThumb(a,function(e,t){var r=d.state.childNodes.slice(0);r.push((0,_extends3.default)({},a,{status:"queued"})),d.setState({childNodes:r})})}),e.on("uploadBeforeSend",function(e,t,r){if(d.updateid){if(r.Authorization="Bearer "+window.vp.cookie.getToken(),t.fileid=d.updateid,d.props.params)for(var a in d.props.params)t[a]=d.props.params[a];d.updateid=""}}),e.on("startUpload",function(e){console.log("开始上传时触发。"),console.log(e)}),e.on("uploadProgress",function(e,t){var r=d.findFileIdx(e),a=d.state.childNodes.slice(0);a[r].status="progress",a[r].percentage=t,d.setState({childNodes:a})}),e.on("uploadAccept",function(e,t){var r=t.infocode?t.infocode.slice(0,3):"",a=t.data;switch(r){case"VP0":var o=d.props.form,i=o.setFieldsValue,n=(o.getFieldValue,d.findFileIdx(e.file)),l=d.state.childNodes.slice(0),s=l.findIndex(function(e){return a.fileid==e.fileid});l[n].status="complete",l[n].creator=a.creator,l[n].doctype=a.doctype||"",l[n].filename=a.filename,l[n].createtime=a.createtime,l[n].fileid=a.fileid,l[n].options=a.options||{},l[n].fileextension=a.fileextension,-1!==s&&(l[s]=l[n],l.pop()),d.setState({childNodes:l},function(){var e=p.state.childNodes.slice(0).map(function(e){return e.fileid}).join(",");i((0,_defineProperty3.default)({},d.props.item.field_name,e))});break;case"VP1":return VpAlertMsg({message:"消息提示",description:t.infocode+"："+t.msg,type:"info",closeText:"关闭",showIcon:!0},5),!1;case"VP2":return VpAlertMsg({message:"警告提示",description:t.infocode+"："+t.msg,type:"warning",closeText:"关闭",showIcon:!0},5),!1;case"VP3":return VpAlertMsg({message:"错误提示",description:t.infocode+"："+t.msg,type:"error",closeText:"关闭",showIcon:!0}),!1}}),e.on("uploadError",function(e){var t=d.findFileIdx(e),r=d.state.childNodes.slice(0);r[t].status="error",d.setState({childNodes:r})}),e.on("error",function(e){var t=e;switch(t){case"Q_EXCEED_NUM_LIMIT":t="超出可上传数量";break;case"Q_EXCEED_SIZE_LIMIT":t="超出可上传总大小";break;case"F_EXCEED_SIZE":t="超出单个文件可上传大小";break;case"Q_TYPE_DENIED":t="文件类型不满足或上传大小为0";break;case"F_DUPLICATE":t="请勿重复上传文件"}VpAlertMsg({message:"警告提示",description:""+t,type:"warning",closeText:"关闭",showIcon:!0},5)}),this.upload=e;var t="."+this.props.item.field_name;this.upload.addButton({id:t,innerHTML:"版本更新"})}},{key:"componentWillReceiveProps",value:function(e){(0,_stringify2.default)(e.data)!==(0,_stringify2.default)(this.props.data)&&this.setState({childNodes:e.data})}},{key:"componentDidUpdate",value:function(){var e="."+this.props.item.field_name;this.upload.addButton({id:e,innerHTML:"版本更新"}),this.upload.refresh()}},{key:"render",value:function(){var r=this,e=this.props.item,t=e.disabled,a=e.readonly,o=e.filestyle,i=(e.ischosefiletype,e.tableheight),n=e.modalheight;return this.state.dataSource=[],_react2.default.createElement("div",{className:"dynamic-upload-wrapper"},_react2.default.createElement("div",{ref:"dnd"},o?_react2.default.createElement("div",{className:"bg-white bottom-icon"},this.state.childNodes.map(function(e,t){r.state.dataSource.push({fileid:e.fileid,entityid:e.entityid,instanceid:e.instanceid,num:t+1,name:e.filename,type:e.fileresponse?e.fileresponse.sfiletype:e.sfiletype,version:e.fileresponse?e.fileresponse.sversion:e.sversion,date:(0,_utils.formatDateTime)(new Date(parseInt(e.createtime))),people:e.creator,options:e.options})}),_react2.default.createElement(VpTable,{columns:this.state.columns,dataSource:this.state.dataSource,emptyData:!0,scroll:{y:i},pagination:!1}),_react2.default.createElement("div",{className:"clearfix m-sm m-b-none"},t||a?null:_react2.default.createElement("div",{className:"fl"},_react2.default.createElement("div",{className:"page-options-wrapper"},_react2.default.createElement("span",{className:"p-r-sm"},_react2.default.createElement(VpTooltip,{placement:"top",title:"上传"},_react2.default.createElement(VpIcon,{type:"vpicon-clouduploado text-primary cursor",onClick:this.uploadFile}))))),_react2.default.createElement("div",{className:"fr"},_react2.default.createElement("span",null,"共 "+this.state.dataSource.length+" 条")))):_react2.default.createElement("div",{className:"inline-display"},_react2.default.createElement("ul",{ref:"list",className:"uploader-list"},this.state.childNodes.map(function(e,t){return _react2.default.createElement("li",{key:e.fileid&&e.createtime?e.fileid+e.createtime:t},r.chooseFileOptions(e),_react2.default.createElement("p",null,"文件名: ",e.filename,"    文件大小: ",_webuploader2.default.formatSize(e.size),"   ",e.creator?_react2.default.createElement("span",null,"上传人: ",e.creator," "):null,"   ",e.createtime?_react2.default.createElement("span",null,"上传时间:",(0,_utils.formatDateTime)(new Date(parseInt(e.createtime)))," "):null))})),t||a?null:_react2.default.createElement("div",{className:"upload-option",onClick:this.uploadFile},_react2.default.createElement("span",null,"添加附件"))),_react2.default.createElement("div",{className:"hide",id:this.props.item.field_name,ref:"upload"}),_react2.default.createElement(VpModal,{width:"60%",style:{height:n},title:"附件上传",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,footer:_react2.default.createElement("div",{className:"text-center"},_react2.default.createElement(VpButton,{type:"primary vp-btn-br",onClick:this.handleOk},window.vp.config.initFooterText.okText?window.vp.config.initFooterText.okText:"确定"),_react2.default.createElement(VpButton,{type:"ghost vp-btn-br",onClick:this.handleCancel},window.vp.config.initFooterText.cancelText?window.vp.config.initFooterText.cancelText:"取消"))},this.state.visible?_react2.default.createElement(VpUploader,{fileTypes:this.state.fileTypes,defaultValue:this.state.defaultValue,fileNumLimit:this.state.fileNumLimit,params:(0,_extends3.default)({},this.props.params,this.state.params),selectType:this.state.selectType,server:vp.gateway.handleGateWay(this.uploadUrl||"/{vpcloud}/upload"),onUploadAccept:this.props.onUploadAccept?this.props.onUploadAccept:function(){},onUploadError:this.props.onUploadError?this.props.onUploadError:function(){},fileTypeTempfun:this.props.fileTypeTemplateClick,singleSize:window.vp.config.URL.singleSize||500,ref:"uploadModal",auto:!0}):null),_react2.default.createElement(VpModal,{title:"数据正在读取...",visible:this.state.progressVisible,onCancel:function(){return r.cancelModal()},width:400,height:300,footer:null,maskClosable:!1},this.state.progressVisible?_react2.default.createElement("div",{className:"text-center p-md",style:{lineHeight:"160px"}},_react2.default.createElement(VpSpin,{size:"large"})):null)),_react2.default.createElement(_ParseModal2.default,{ref:"parseProgress",closeFn:function(){console.log("parseProgress callback")}}))}}]),t}(_react2.default.Component),VpUEditor=exports.VpUEditor=function(e){function a(e){(0,_classCallCheck3.default)(this,a);var o=(0,_possibleConstructorReturn3.default)(this,(a.__proto__||(0,_getPrototypeOf2.default)(a)).call(this,e));o.handleClick=function(e){var t=$(e.target).parents(".vpueditor"),r=$(e.target).parents("#edui_fixedlayer");if(0===t.length&&0===r.length){var a=$("#"+o.state.id).find(".edui-editor-toolbarbox")[0];a&&(a.style.display="none")}};var t=void 0,r=void 0;if(o.props.id)for(t=o.props.id,r=document.getElementById(t);r;)t=o.props.id+"_"+parseInt(1e3*Math.random()),r=document.getElementById(t);else for(t="VpUEditor",r=document.getElementById(t);r;)t="VpUEditor_"+parseInt(1e3*Math.random()),r=document.getElementById(t);return o.state={id:t},o}return(0,_inherits3.default)(a,e),(0,_createClass3.default)(a,[{key:"componentDidMount",value:function(){var t=this;UE.delEditor(this.state.id,this.props.config);var r=UE.getEditor(this.state.id,this.props.config);if(this.props.hideTool){r.addListener("focus",function(){setTimeout(function(){var e=$("#"+t.state.id).find(".edui-editor-toolbarbox")[0];e&&(e.style.display="block")},0)});var e=document.body;e.addEventListener?e.addEventListener("click",this.handleClick):e.attachEvent&&e.attachEvent("onclick",this.handleClick)}r.ready(function(e){r.execCommand("serverparam",{access_token:window.vp.cookie.getToken()})})}},{key:"componentWillUnmount",value:function(){var e=document.body;e.removeEventListener?e.removeEventListener("click",this.handleClick):e.detachEvent&&e.detachEvent("onclick",this.handleClick),this.ueEditor&&this.ueEditor.destroy()}},{key:"render",value:function(){return _react2.default.createElement("div",(0,_extends3.default)({className:"vpueditor "+(this.props.hideTool?"hide-tool":"")},this.props,{id:this.state.id}))}}]),a}(_react2.default.Component);VpUEditor.defaultProps={hideTool:!1};var VpFUEditor=exports.VpFUEditor=function(e){function a(e){(0,_classCallCheck3.default)(this,a);var o=(0,_possibleConstructorReturn3.default)(this,(a.__proto__||(0,_getPrototypeOf2.default)(a)).call(this,e));o.handleClick=function(e){var t=$(e.target).parents(".vpueditor"),r=$(e.target).parents("#edui_fixedlayer");if(0===t.length&&0===r.length){var a=$("#"+o.state.id).find(".edui-editor-toolbarbox")[0];a&&(a.style.display="none")}};var t=void 0,r=void 0;if(o.props.id)for(t=o.props.id,r=document.getElementById(t);r;)t=o.props.id+"_"+parseInt(1e3*Math.random()),r=document.getElementById(t);else for(t="VpUEditor",r=document.getElementById(t);r;)t="VpUEditor_"+parseInt(1e3*Math.random()),r=document.getElementById(t);return o.state={id:t},o}return(0,_inherits3.default)(a,e),(0,_createClass3.default)(a,[{key:"componentWillReceiveProps",value:function(e){var t=this,r=e.form,a=(r.setFieldsValue,(0,r.getFieldValue)(e.item.field_name));this.ueEditor.ready(function(e){t.ueEditor.getContent()!==a&&t.ueEditor.setContent(a)})}},{key:"componentDidMount",value:function(){var t=this,e=this.props.form,r=e.setFieldsValue,a=(e.getFieldValue,this);UE.delEditor(this.state.id,this.props.config);var o=!!a.props.item.disabled||!!a.props.item.readonly,i=UE.getEditor(this.state.id,(0,_extends3.default)({initialFrameHeight:200},this.props.config,{readonly:o}));if(i.ready(function(e){e||(UE.delEditor(t.state.id),a.initEditor()),i.execCommand("serverparam",{access_token:window.vp.cookie.getToken()}),i.setContent(a.props.item.widget&&a.props.item.widget.default_value)}),this.props.hideTool){i.addListener("focus",function(){setTimeout(function(){var e=$("#"+a.state.id).find(".edui-editor-toolbarbox")[0];e&&(e.style.display="block")},0)});var n=document.body;n.addEventListener?n.addEventListener("click",this.handleClick):n.attachEvent&&n.attachEvent("onclick",this.handleClick)}i.addListener("selectionchange",function(e){r((0,_defineProperty3.default)({},a.props.item.field_name,i.getContent()))}),this.ueEditor=i}},{key:"componentWillUnmount",value:function(){var e=document.body;e.removeEventListener?e.removeEventListener("click",this.handleClick):e.detachEvent&&e.detachEvent("onclick",this.handleClick),this.ueEditor&&this.ueEditor.destroy(),this.setState=function(e,t){}}},{key:"render",value:function(){return _react2.default.createElement(FormItem,this.props,_react2.default.createElement("div",(0,_extends3.default)({className:"vpueditor "+(this.props.hideTool?"hide-tool":"")},this.props,{id:this.state.id})))}}]),a}(_react2.default.Component);VpFUEditor.defaultProps={config:{},hideTool:!1};var VpRightClick=exports.VpRightClick=_VpRightClick2.default,VpInputUploader=exports.VpInputUploader=function(e){function r(e){(0,_classCallCheck3.default)(this,r);var t=(0,_possibleConstructorReturn3.default)(this,(r.__proto__||(0,_getPrototypeOf2.default)(r)).call(this,e));return t.state={childNodes:{}},t}return(0,_inherits3.default)(r,e),(0,_createClass3.default)(r,[{key:"componentWillMount",value:function(){this.uploadUrl=this.props.item.widget&&this.props.item.widget.upload_url?this.props.item.widget.upload_url:window.vp.config.URL.upload}},{key:"componentDidMount",value:function(){var n=this,l=this;if(!_webuploader2.default.Uploader.support())throw VpAlertMsg({message:"警告提示",description:"Web Uploader 不支持您的浏览器！如果你使用的是IE浏览器，请尝试升级 flash 播放器",type:"warning",closeText:"关闭",showIcon:!0},5),new Error("WebUploader does not support the browser you are using.");var e=_webuploader2.default.create((0,_extends3.default)({swf:"../vpstatic/plugins/webUploader/Uploader.swf",disableGlobalDnd:!0,auto:!this.props.item.hasOwnProperty("auto")||this.props.item.auto,timeout:0,server:vp.gateway.handleGateWay(this.uploadUrl||window.vp.config.URL.upload||"/{vpcloud}/upload"),pick:{id:this.refs.upload,multiple:!1},accept:this.props.item.widget?this.props.item.widget.accept:null,fileSizeLimit:this.props.fileSizeLimit?1024*parseInt(this.props.fileSizeLimit)*1024:void 0},this.props.uploaderOptions));e.on("fileQueued",function(e){var t=n.props.form.setFieldsValue,r=l.upload.getFiles("inited");1<r.length&&l.upload.removeFile(r[0]),t((0,_defineProperty3.default)({},l.props.item.field_name+"_label",e.name))}),e.on("uploadBeforeSend",function(e,t,r){r.Authorization="Bearer "+window.vp.cookie.getToken()}),e.on("startUpload",function(e){console.log("开始上传时触发。")}),e.on("uploadProgress",function(e,t){}),e.on("uploadAccept",function(e,t){switch(t.infocode?t.infocode.slice(0,3):""){case"VP0":var r=t.data,a=l.props.form,o=a.setFieldsValue,i=(a.getFieldValue,{status:"complete"});i.filename=r.filename,i.fileid=r.fileid,l.setState({childNodes:i},function(){var e=n.state.childNodes.fileid,t=n.state.childNodes.filename;o((0,_defineProperty3.default)({},l.props.item.field_name,e)),o((0,_defineProperty3.default)({},l.props.item.field_name+"_label",t))});break;case"VP1":return VpAlertMsg({message:"消息提示",description:t.infocode+"："+t.msg,type:"info",closeText:"关闭",showIcon:!0},3),!1;case"VP2":return VpAlertMsg({message:"警告提示",description:t.infocode+"："+t.msg,type:"warning",closeText:"关闭",showIcon:!0},5),!1;case"VP3":return VpAlertMsg({message:"错误提示",description:t.infocode+"："+t.msg,type:"error",closeText:"关闭",showIcon:!0}),!1}"function"==typeof l.props.onUploadAccept&&l.props.onUploadAccept(e,t)}),e.on("uploadError",function(e,t){"server"!==t&&VpAlertMsg({message:"错误提示",description:"上传失败",type:"error",closeText:"关闭",showIcon:!0}),l.setState({childNodes:(0,_extends3.default)({},l.childNodes,{status:"error"})}),"function"==typeof l.props.onUploadError&&l.props.onUploadError(e,t)}),e.on("error",function(e){var t=e,r=l.props.item&&l.props.item.widget,a=n.props.uploaderOptions&&n.props.uploaderOptions.fileSizeLimit?n.props.uploaderOptions.fileSizeLimit/1024/1024:0,o=n.props.uploaderOptions&&n.props.uploaderOptions.fileSingleSizeLimit?n.props.uploaderOptions.fileSingleSizeLimit/1024/1024:0,i="M";switch(o<1&&(o*=1024,i="k"),a<1&&(a*=1024,i="k"),e){case"Q_EXCEED_NUM_LIMIT":t="超出可上传数量";break;case"Q_EXCEED_SIZE_LIMIT":t="超出可上传总大小("+(a+i)+")";break;case"F_EXCEED_SIZE":t="超出可上传大小("+(o+i)+")";break;case"Q_TYPE_DENIED":t="文件类型不满足或上传文件大小为0",r&&r.accept&&(t="请上传不为空(大小大于0)的"+(r.accept.title||"")+"文件("+r.accept.extensions+")");break;case"F_DUPLICATE":t="请勿重复上传文件"}VpAlertMsg({message:"消息提示",description:""+t,type:"warning",closeText:"关闭",showIcon:!0},5)}),this.upload=e}},{key:"render",value:function(){var e=this.props.form,t=e.getFieldProps,r=(e.getFieldValue,this.props.item),a=(this.state.childNodes.filename?this.state.childNodes.filename:this.props.placeholder&&this.props.placeholder,this.props.item.field_name),o=this.props.item.tips||"",i=this.props.item.field_label,n=1==(r.hasOwnProperty("validator")&&r.validator.hasOwnProperty("required")?r.validator.required:""),l=r.hasOwnProperty("widget")&&r.widget.hasOwnProperty("default_value")?r.widget.default_value:void 0,s=r.hasOwnProperty("widget")&&r.widget.hasOwnProperty("default_label")?r.widget.default_label:void 0,p={labelCol:{span:6,title:r.field_label},wrapperCol:{span:14}},d={labelCol:{span:3,title:r.field_label},wrapperCol:{span:19}},u=r.hasOwnProperty("all_line")&&2==r.all_line?d:p,c=t(a,{initialValue:l,rules:[{required:n,message:i+"不能为空"}],onChange:this[r.onchange]}),f=t(r.field_name+"_label",{initialValue:s,rules:[{required:n,message:i+"不能为空"}]});return _react2.default.createElement("div",{className:"dynamic-upload-wrapper input-upload"},_react2.default.createElement("div",{className:"hide"},_react2.default.createElement(VpFInput,c)),_react2.default.createElement(FormItem,(0,_extends3.default)({},u,this.props,{label:i}),_react2.default.createElement(VpInput,(0,_extends3.default)({placeholder:o},f,{disabled:!0})),_react2.default.createElement("div",{ref:"upload",className:"input-upload-opacity"},_react2.default.createElement(VpInput,{placeholder:o,disabled:!0}))))}}]),r}(_react2.default.Component);VpInputUploader.defaultProptype={uploaderOptions:{}};var VpConfirmTag=exports.VpConfirmTag=function(e){function r(e){(0,_classCallCheck3.default)(this,r);var t=(0,_possibleConstructorReturn3.default)(this,(r.__proto__||(0,_getPrototypeOf2.default)(r)).call(this,e));return t.handleClose=function(){t.setState({destory:!0}),t.props.onConfirm&&t.props.onConfirm()},t.state={destory:!1},t}return(0,_inherits3.default)(r,e),(0,_createClass3.default)(r,[{key:"render",value:function(){var e=this.props,t=e.title,r=e.className;return this.state.destory?null:_react2.default.createElement("div",{className:r||"ant-tag ant-btn ant-btn-dashed ant-btn-sm"},_react2.default.createElement("span",{className:"ant-tag-text"},this.props.children),_react2.default.createElement(VpPopconfirm,(0,_extends3.default)({title:t||"确定要删除？"},this.props,{onConfirm:this.handleClose}),_react2.default.createElement("i",{className:"anticon anticon-cross"})))}}]),r}(_react2.default.Component),VpMention=exports.VpMention=_VpMention.Mention,VpFMention=exports.VpFMention=_VpMention.FMention,VpPopover=exports.VpPopover=_popover2.default,VpDrawer=exports.VpDrawer=_VpDrawer2.default,VpLightBox=exports.VpLightBox=_VpLightBox2.default,VpAlertMsg=exports.VpAlertMsg=_VpAlertMsg2.default.info,ErrorPage=exports.ErrorPage=function(e,t,r){0==$(".error-page").length&&($("#app").append("\n\t\t\t<div class='error-page'>\n\t\t\t\t<div class=\"ant-modal-mask\"></div>\n\t\t\t\t<div class='ant-modal-wrap vertical-center-modal'>\n\t\t\t\t\t<div class='bg-white p-md'>\n\t\t\t\t\t\t<div class='top clearfix pr'>\n\t\t\t\t\t\t\t<div class='img full-height fl'></div>\n\t\t\t\t\t\t\t<div class='content p-tb-sm full-height fr'>\n\t\t\t\t\t\t\t\t<p class='fw f16'>"+e+"</p>\n\t\t\t\t\t\t\t\t<div class='error-page-content'>"+t+'</div>\n\t\t\t\t\t\t\t\t<div class=\'error-button text-center m-t-sm\'>\n\t\t\t\t\t\t\t\t\t<button class=\'ant-btn ant-btn-primary m-r-sm reset-page\'>点击刷新</button>\n\t\t\t\t\t\t\t\t\t<button class=\'ant-btn ant-btn-ghost close-page\'>关闭页面</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="bottom b-t text-center p-t-sm hide">\n\t\t\t\t\t\t\t<span class="cursor details">\n\t\t\t\t\t\t\t\t查看问题详细信息 \n\t\t\t\t\t\t\t\t<i class="vpicon vpicon-arrow-down f12"></i>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="details-content p-sm m-t-sm">'+(r||"")+"</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"),$(".reset-page").click(function(){location.reload(),$(".error-page").remove()}),$(".close-page").click(function(){$(".error-page").remove()}),$(".error-page .details").click(function(){$(".error-page .details-content").slideToggle()}))},VpBreadcrumb=exports.VpBreadcrumb=_breadcrumb2.default,VpIconGroup=exports.VpIconGroup=_VpIconGroup2.default,VpEchart=exports.VpEchart=_VpCharts2.default;