webpackJsonp([1],{943:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(172),l=n(i),s=a(323),o=n(s),d=a(418),r=n(d),c=a(459),u=n(c),p=a(54),h=n(p),f=a(55),m=n(f),v=a(59),y=n(v),g=a(93),w=n(g),k=a(8),b=n(k),x=a(4),C=a(944),D=n(C),S=a(597);a(945);var _=function(e){function t(e){(0,h["default"])(this,t);var a=(0,y["default"])(this,(t.__proto__||(0,u["default"])(t)).call(this,e));return a.getData=function(){var e=a;(0,x.vpAdd)("/{vppm}/vfrm/template/getTemplateTreeData",{entityid:9,templateType:6}).then(function(t){var a=t.data,n=function(){return"共"+a.totalRows+"条"},i=vp.computedHeight(a.resultList.length,".phaseTemp",185);e.setState({tableHeight:i,table_array:a.resultList,cur_page:a.currentPage,total_rows:a.totalRows,num_perpage:a.numPerPage,pagination:{showTotal:n,pageSize:a.numPerPage,showSizeChanger:!1,showQuickJumper:!1}});var l=e.getExpandedRowa(a.resultList,[]);e.setState({expandedRowKeys:l})})["catch"](function(e){"function"!=typeof e||e()})},a.saveRowData=function(e){a.setState({loading:!0});var t=a;if((0,r["default"])(e).forEach(function(t,a){e[t]==undefined?e[t]="":null==e[t]&&(e[t]=0)}),e.hasOwnProperty("sname")&&(null==e.sname||""==e.sname))return void a.setState({loading:!1});e.iparent=t.state.rowiid,e.newType=t.state.newType,"editTemplate"==t.state.newType&&(e.iid=t.state.rowiid),(0,x.vpAdd)("/{vppm}/vfrm/template/save",{sparam:(0,o["default"])(e)}).then(function(e){a.setState({loading:!1},function(){e.data.success?a.setState({visible:!1,increaseData:{}},a.getData):(0,x.VpAlertMsg)({message:"消息提示",description:e.data.msg,type:"error",closeText:"关闭",showIcon:!0},5)})})["catch"](function(){a.setState({loading:!1})})},a.toolBarClick=function(e){var t="新建模板",n={newType:e,iparent:a.state.rowiid};"newGroup"==e?t="新建分组":"editTemplate"==e&&(t="编辑模板",n.iid=a.state.rowiid),(0,x.vpAdd)("/{vppm}/vfrm/template/getNewForm",n).then(function(n){a.setState({modaltitle:t,increaseData:n.data.form,newType:e,visible:!0,visibleKey:Date.now()})})},a.state={filters:[],visible2:!1,showRightBox:!1,table_headers:[],table_array:[],cur_page:1,page:1,pagination:{},filtervalue:"",limit:10,quickvalue:"",sortfield:"",sorttype:"",multipleData:[],increaseData:[],tabs_array:[],tabs:null,filterDropdownVisible:!1,max:!1,entityid:"",iids:"",entityiid:"",add:!0,visible:!1,modaltitle:"",searchVal:"",entityrole:!0,newType:"",open:!1,tableHeight:"",expandedRowKeys:[],loading:!1},a.handleCancel=a.handleCancel.bind(a),a.handleOk=a.handleOk.bind(a),a.handlesearch=a.handlesearch.bind(a),a.tableChange=a.tableChange.bind(a),a.filterChange=a.filterChange.bind(a),a.multipleSearch=a.multipleSearch.bind(a),a.handleVisibleChange=a.handleVisibleChange.bind(a),a.saveRowData=a.saveRowData.bind(a),a.tabsChange=a.tabsChange.bind(a),a.onRowClick=a.onRowClick.bind(a),a.getHeader=a.getHeader.bind(a),a.getData=a.getData.bind(a),a.okModal=a.okModal.bind(a),a.cancelModal=a.cancelModal.bind(a),a.onExpand=a.onExpand.bind(a),a.menuClick=a.menuClick.bind(a),a.toolBarClick=a.toolBarClick.bind(a),a.closeRightModal=a.closeRightModal.bind(a),a}return(0,w["default"])(t,e),(0,m["default"])(t,[{key:"componentWillMount",value:function(){var e=this;this.setState({entityid:this.props.entityid,iid:this.props.iid},function(){e.getHeader(),e.getData()})}},{key:"componentDidMount",value:function(){var e=vp.computedHeight(this.state.table_array.length,".phaseTemp",185);this.setState({tableHeight:e})}},{key:"getHeader",value:function(){var e=this;(0,x.vpAdd)("/{vppm}/vfrm/template/getTemplateTreeHeader",{entityid:9,templateType:6}).then(function(t){if(t&&t.hasOwnProperty("data")&&(e.setState({loading:!1}),t.data.hasOwnProperty("grid"))){var a=[];if(t.data.grid.hasOwnProperty("fields")){t.data.grid.fields.map(function(e,t){var n=void 0,i=void 0,l=void 0,s=void 0;for(var o in e)"field_label"==o?n=e[o]:"field_name"==o&&(i=e[o]),"fixed"==o&&(s=e[o]),"field_width"==o&&(l=e[o]);n&&i&&("left"==s||"right"==s?a.push({title:n,dataIndex:i,key:i,width:l,fixed:s}):a.push({title:n,dataIndex:i,key:i,fixed:s}))});var n={title:"操作",fixed:"right",width:120,key:"operation",render:function(t,a){var n=a.rowtype;return"temptype"==n?b["default"].createElement("span",null,b["default"].createElement("div",{style:{textAlign:"left"}},b["default"].createElement(x.VpTooltip,{placement:"left",title:"新建分组"},b["default"].createElement(x.VpIconFont,{type:"vpicon-plus text-primary",style:{margin:"0 3px"},className:"cursor",onClick:function(){return e.menuClick({key:"newGroup"},a.iid,a.sname)}})))):"temprow"==n?b["default"].createElement("span",null,b["default"].createElement("div",{style:{textAlign:"left"}},b["default"].createElement(x.VpTooltip,{placement:"left",title:"编辑模板"},b["default"].createElement(x.VpIconFont,{type:"vpicon-edit text-primary",style:{margin:"0 3px"},className:"cursor",onClick:function(){return e.menuClick({key:"editTemplate"},a.iid,a.sname)}})),b["default"].createElement(x.VpTooltip,{placement:"left",title:"设计模板"},b["default"].createElement(x.VpIcon,{type:"setting",style:{margin:"0 3px"},className:"cursor",onClick:function(){return e.menuClick({key:"setTemplate"},a.iid,a.sname)}})),b["default"].createElement(x.VpTooltip,{placement:"left",title:"删除模板"},b["default"].createElement(x.VpIconFont,{type:"vpicon-shanchu ",style:{margin:"0 3px"},className:"cursor",onClick:function(){return e.menuClick({key:"deleteTemplate"},a.iid,a.sname)}})))):b["default"].createElement("span",null,b["default"].createElement("div",{style:{textAlign:"left"}},b["default"].createElement(x.VpTooltip,{placement:"left",title:"新建模板"},b["default"].createElement(x.VpIconFont,{type:"vpicon-plus text-primary",style:{margin:"0 3px"},className:"cursor",onClick:function(){return e.menuClick({key:"newTemplate"},a.iid,a.sname)}})),b["default"].createElement(x.VpTooltip,{placement:"left",title:"删除分组"},b["default"].createElement(x.VpIconFont,{type:"vpicon-shanchu ",style:{margin:"0 3px"},className:"cursor",onClick:function(){return e.menuClick({key:"deleteGroup"},a.iid,a.sname)}}))))}},i=[];a.filter(function(e){return"sname"==e.dataIndex}).map(function(e){e.width=280,i.push(e)}),a.map(function(e){"sname"!=e.dataIndex&&i.push(e)}),i.push(n),e.setState({table_headers:i})}}})["catch"](function(e){})}},{key:"getExpandedRowa",value:function(e,t){var a=this,n=t;if(e.length){var i=[];e.map(function(e){n.push(e.iid),e.hasOwnProperty("children")&&(i=a.getExpandedRowa(e.children,n),i.map(function(e){-1==n.findIndex(function(t){return e===t})&&n.push(e)}))})}return n}},{key:"onExpand",value:function(e,t){if(e)this.setState({expandedRowKeys:[].concat((0,l["default"])(this.state.expandedRowKeys),[t.iid])},function(){});else{var a=this.state.expandedRowKeys.findIndex(function(e){return t.iid===e});this.setState({expandedRowKeys:[].concat((0,l["default"])(this.state.expandedRowKeys.slice(0,a)),(0,l["default"])(this.state.expandedRowKeys.slice(a+1)))},function(){})}}},{key:"handlesearch",value:function(e){var t=e.replace(/\s/g,"");this.setState({quickvalue:t},this.getData)}},{key:"tableChange",value:function(e,t,a){var n="";"descend"===a.order?n="desc":"ascend"===a.order&&(n="asc"),this.setState({cur_page:e.current||this.state.cur_page,sortfield:a.field,sorttype:n,limit:e.pageSize||this.state.limit},this.getData)}},{key:"onShowSizeChange",value:function(e){}},{key:"filterChange",value:function(e){var t=this;this.setState({filtervalue:e.target.value},function(){t.getData()})}},{key:"multipleSearch",value:function(e){var t=this;e.preventDefault();var a=[];this.state.multipleData[0].fields.forEach(function(e){a.push(e.field_name)}),this.props.form.validateFields(a,function(e,a){e||(t.setState({s_visible:!1}),t.getData(a))})}},{key:"okModal",value:function(){this.setState({visible:!1,open:!1})}},{key:"cancelModal",value:function(){this.setState({visible:!1,open:!1})}},{key:"handleCancel",value:function(){this.setState({increaseData:{},visible:!1})}},{key:"handleOk",value:function(){this.saveRowData(this.props.form.getFieldsValue())}},{key:"handleVisibleChange",value:function(){this.setState({s_visible:!this.state.s_visible})}},{key:"tabsChange",value:function(e){}},{key:"onRowClick",value:function(e,t){e.onclick}},{key:"openTemplateWindow",value:function(){this.setState({showRightBox:!0})}},{key:"loadTemplateWindow",value:function(){return b["default"].createElement(x.VpTabs,{defaultActiveKey:"0",onChange:this.tabsChange},b["default"].createElement(x.VpTabPane,{tab:"模板>"+this.state.modaltitle,key:"0"},b["default"].createElement(D["default"],{iid:this.state.rowiid})))}},{key:"closeRightModal",value:function(){this.setState({showRightBox:!1})}},{key:"menuClick",value:function(e,t,a){var n=this,i=this,l=e.key;"newTemplate"==l||"newGroup"==l||"editTemplate"==l?this.setState({rowiid:t,rowname:a,key:l},function(){n.toolBarClick(l)}):"deleteGroup"==l||"deleteTemplate"==l?(0,x.vpAdd)("/{vppm}/vfrm/template/delete",{deleteType:l,iid:t}).then(function(e){e.data.success?i.getData():(0,x.VpAlertMsg)({message:"消息提示",description:e.data.msg,type:"error",closeText:"关闭",showIcon:!0},5)}):"setTemplate"==l&&this.setState({rowiid:t,rowname:a,modaltitle:a},function(){i.openTemplateWindow()})}},{key:"render",value:function(){var e=this,t={entityrole:!0};return b["default"].createElement("div",{className:"full-height "},b["default"].createElement("div",{className:"p-sm bg-white full-height scroll-y",id:"table",style:{paddingBottom:0}},b["default"].createElement(x.VpTable,{className:"phaseTemp",onExpand:this.onExpand,columns:this.state.table_headers,dataSource:this.state.table_array,onChange:this.tableChange,onRowClick:this.onRowClick,pagination:this.state.pagination,expandIconColumnIndex:0,expandedRowKeys:this.state.expandedRowKeys,scroll:{x:1500,y:this.state.tableHeight},resize:!0})),b["default"].createElement(x.VpModal,{title:this.state.modaltitle,visible:this.state.visible,onOk:function(){return e.okModal()},onCancel:function(){return e.cancelModal()},width:"80%",height:"90%",footer:null,wrapClassName:"modal-no-footer",key:this.state.visibleKey},b["default"].createElement(S.VpDynamicForm,{className:"p-sm full-height scroll p-b-xxlg",formData:this.state.increaseData,handleOk:this.saveRowData,handleCancel:this.handleCancel,params:t,loading:this.state.loading,okText:"保 存"})),b["default"].createElement(x.VpModal,{title:this.state.modaltitle,visible:this.state.open,onOk:function(){return e.okModal()},onCancel:function(){return e.cancelModal()},width:"80%",height:"90%",footer:null,wrapClassName:"modal-no-footer"},b["default"].createElement(x.VpIframe,{url:this.state.openurl})),b["default"].createElement(S.RightBox,{max:this.state.max,button:b["default"].createElement("div",{className:"icon p-xs",onClick:this.closeRightModal},b["default"].createElement(x.VpTooltip,{placement:"top",title:""},b["default"].createElement(x.VpIcon,{type:"right"}))),show:this.state.showRightBox},this.state.showRightBox?this.loadTemplateWindow():null))}}]),t}(k.Component);t["default"]=_=(0,x.VpFormCreate)(_)},944:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(323),l=n(i),s=a(418),o=n(s),d=a(172),r=n(d),c=a(459),u=n(c),p=a(54),h=n(p),f=a(55),m=n(f),v=a(59),y=n(v),g=a(93),w=n(g),k=a(8),b=n(k),x=a(4),C=a(597);a(945);var D=function(e){function t(e){(0,h["default"])(this,t);var a=(0,y["default"])(this,(t.__proto__||(0,u["default"])(t)).call(this,e));return a.state={filters:[],visible2:!1,targetKeys:[],showRightBox:!1,widget_show_none:"",widget_show_none_tool:"",filter_data:[],table_headers:[],table_array:[],cur_page:1,page:1,pagination:{},filtervalue:"",limit:10,quickvalue:"",sortfield:"",sorttype:"",multipleData:[],activeKey:"1",increaseData:[],tabs_array:[],tabs:null,filterDropdownVisible:!1,isAdd:!1,formSearch_data:[],form_data:[],formdata:[],entityid:"",iids:"",row_id:"",entityiid:"",add:!0,visible:!1,modaltitle:"",searchVal:"",phaseiid:"",entityrole:!1,newFlag:!1,expandedRowKeys:[],tableHeight:"",isClickMenu:!1,loading:!1},a.handleCancel=a.handleCancel.bind(a),a.handleOk=a.handleOk.bind(a),a.handlesearch=a.handlesearch.bind(a),a.tableChange=a.tableChange.bind(a),a.filterChange=a.filterChange.bind(a),a.multipleSearch=a.multipleSearch.bind(a),a.handleVisibleChange=a.handleVisibleChange.bind(a),a.saveRowData=a.saveRowData.bind(a),a.onRowClick=a.onRowClick.bind(a),a.getHeader=a.getHeader.bind(a),a.queryFormData=a.queryFormData.bind(a),a.getData=a.getData.bind(a),a.handleConfirm=a.handleConfirm.bind(a),a.confirm=a.confirm.bind(a),a.okModal=a.okModal.bind(a),a.cancelModal=a.cancelModal.bind(a),a.onExpand=a.onExpand.bind(a),a.menuClick=a.menuClick.bind(a),a.handleDropDown=a.handleDropDown.bind(a),a}return(0,w["default"])(t,e),(0,m["default"])(t,[{key:"componentWillMount",value:function(){var e=this;this.setState({entityid:this.props.entityid,iid:this.props.iid},function(){e.getHeader(),e.getData()})}},{key:"componentDidMount",value:function(){var e=$(window).height()-265;$(".phaseTemp").find(".ant-table-body").css({height:e}),this.setState({tableHeight:e})}},{key:"getHeader",value:function(){var e=this;(0,x.vpAdd)("/{vppm}/vfrm/template/getTemplateTreeHeader",{entityid:9,templateType:6,itemplateid:e.state.iid}).then(function(t){if(t&&t.hasOwnProperty("data")&&(e.setState({loading:!1}),t.data.hasOwnProperty("grid"))){var a=[];if(t.data.grid.hasOwnProperty("fields")){t.data.grid.fields.map(function(e,t){var n=void 0,i=void 0,l=void 0,s=void 0;for(var o in e)"field_label"==o?n=e[o]:"field_name"==o&&(i=e[o]),"fixed"==o&&(s=e[o]),"field_width"==o&&(l=e[o]);n&&i&&("left"==s||"right"==s?a.push({title:n,dataIndex:i,key:i,width:l,fixed:s}):a.push({title:n,dataIndex:i,key:i,fixed:s}))});var n={title:"操作",fixed:"right",width:120,key:"operation",render:function(t,a){var n=a.iclassid,i=[{key:"newPhase",sname:"新建阶段",type:"vpicon-plus-circle text-info"},{key:"newPc",sname:"新建批次",type:"vpicon-plus-circle text-info"},{key:"newSprint",sname:"新建Sprint",type:"vpicon-plus-circle text-info"},{key:"newact",sname:"新建活动",type:"vpicon-plus-circle text-info"},{key:"newlcb",sname:"新建里程碑",type:"vpicon-plus-circle text-info"},{key:"delete",sname:"删除",type:"vpicon-shanchu text-danger"},{key:"up",sname:"上移",type:"vpicon-caret-up text-success"},{key:"down",sname:"下移",type:"vpicon-caretdown text-success"}],l=!1,s=b["default"].createElement(x.VpMenu,{onClick:e.menuClick},i.map(function(e){if(l=!1,91==n||92==n?"newact"!=e.key&&"newlcb"!=e.key&&"newjfw"!=e.key&&"delete"!=e.key&&"up"!=e.key&&"down"!=e.key||(l=!0):93==n||94==n?"delete"!=e.key&&"up"!=e.key&&"down"!=e.key||(l=!0):359==n?"newact"!=e.key&&"newlcb"!=e.key&&"newjfw"!=e.key&&"delete"!=e.key&&"up"!=e.key&&"down"!=e.key||(l=!0):360==n?"delete"!=e.key&&"up"!=e.key&&"down"!=e.key||(l=!0):"newPhase"!=e.key&&"newPc"!=e.key&&"newSprint"!=e.key||(l=!0),l)return b["default"].createElement(x.VpMenuItem,{key:e.key},b["default"].createElement("a",null,b["default"].createElement(x.VpIconFont,{type:e.type}),"  ",e.sname))}));return b["default"].createElement("span",null,b["default"].createElement("div",{style:{textAlign:"left"},"data-id":a.iid,"data-sname":a.sname,className:"optmenu"},e.state.isClickMenu?"":b["default"].createElement(x.VpDropdown,{trigger:["click"],overlay:s,getPopupContainer:function(){return document.body}},b["default"].createElement(x.VpIconFont,{type:"vpicon-navlist",className:"cursor",onClick:function(t){return e.handleDropDown(t)}}))))}},i=[];a.filter(function(e){return"sname"==e.dataIndex}).map(function(e){e.width=300,i.push(e)}),a.map(function(e){"sname"!=e.dataIndex&&i.push(e)}),i.push(n),e.setState({table_headers:i})}}})["catch"](function(e){})}},{key:"getData",value:function(){var e=this.state,t=(e.iid,e.entityid,e.searchVal,this);(0,x.vpAdd)("/{vppm}/vfrm/template/getTemplateTreeData",{entityid:9,templateType:6,itemplateid:t.state.iid}).then(function(e){var a=e.data,n=function(){return"共"+a.totalRows+"条"};t.setState({isClickMenu:!1,table_array:a.resultList,cur_page:a.currentPage,total_rows:a.totalRows,num_perpage:a.numPerPage,pagination:{showTotal:n,pageSize:a.numPerPage,showSizeChanger:!1,showQuickJumper:!1}});var i=t.getExpandedRowa(a.resultList,[]);t.setState({expandedRowKeys:i})})["catch"](function(e){"function"!=typeof e||e()})}},{key:"getExpandedRowa",value:function(e,t){var a=this,n=t;if(e.length){var i=[];e.map(function(e){n.push(e.iid),e.hasOwnProperty("children")&&(i=a.getExpandedRowa(e.children,n),i.map(function(e){-1==n.findIndex(function(t){return e===t})&&n.push(e)}))})}return n}},{key:"onExpand",value:function(e,t){if(e)this.setState({expandedRowKeys:[].concat((0,r["default"])(this.state.expandedRowKeys),[t.iid])},function(){});else{var a=this.state.expandedRowKeys.findIndex(function(e){return t.iid===e});this.setState({expandedRowKeys:[].concat((0,r["default"])(this.state.expandedRowKeys.slice(0,a)),(0,r["default"])(this.state.expandedRowKeys.slice(a+1)))},function(){})}}},{key:"handlesearch",value:function(e){var t=this,a=e.replace(/\s/g,"");this.setState({quickvalue:a},function(){t.getData()})}},{key:"tableChange",value:function(e,t,a){var n=this,i="";"descend"===a.order?i="desc":"ascend"===a.order&&(i="asc"),this.setState({cur_page:e.current||this.state.cur_page,sortfield:a.field,sorttype:i,limit:e.pageSize||this.state.limit},function(){n.getData()})}},{key:"confirm",value:function(){var e=this,t={entityid:9,iid:e.state.row_id};(0,x.vpAdd)("/{vppm}/vfrm/entity/deleteData",t).then(function(t){e.getData()})}},{key:"handleConfirm",value:function(e){e.stopPropagation();var t=e.target.dataset.id;this.setState({row_id:t})}},{key:"filterChange",value:function(e){var t=this;this.setState({filtervalue:e.target.value},function(){t.getData()})}},{key:"multipleSearch",value:function(e){var t=this;e.preventDefault();var a=[];this.state.multipleData[0].fields.forEach(function(e){a.push(e.field_name)}),this.props.form.validateFields(a,function(e,a){e||(t.setState({s_visible:!1}),t.getData(a))})}},{key:"okModal",value:function(){this.setState({visible:!1,isClickMenu:!1})}},{key:"cancelModal",value:function(){this.setState({visible:!1,isClickMenu:!1})}},{key:"handleDropDown",value:function(e){e.stopPropagation();var t=$(e.target).closest(".optmenu").attr("data-id"),a=$(e.target).closest(".optmenu").attr("data-sanme");this.setState({phaseiid:t,phasename:a})}},{key:"handleCancel",value:function(){this.setState({visible:!1,isClickMenu:!1})}},{key:"handleOk",value:function(){this.saveRowData(this.props.form.getFieldsValue())}},{key:"handleVisibleChange",value:function(){this.setState({s_visible:!this.state.s_visible})}},{key:"saveRowData",value:function(e,t){this.setState({loading:!0});var a=this;(0,o["default"])(e).forEach(function(t,a){e[t]==undefined?e[t]="":null==e[t]&&(e[t]=0)}),a.state.newFlag?(e.iparent=a.state.phaseiid,e.itemplateid=a.state.iid,e.newType=a.state.newType):(e.newType="edit",e.iid=a.state.phaseiid),(0,x.vpAdd)("/{vppm}/vfrm/template/save",{sparam:(0,l["default"])(e)}).then(function(e){e.data.success?a.setState({visible:!1,loading:!1,increaseData:{}},a.getData()):(0,x.VpAlertMsg)({message:"消息提示",description:e.data.msg,type:"error",closeText:"关闭",showIcon:!0},5)})}},{key:"onRowClick",value:function(e,t){if("false"==e.onclick);else{this.setState({increaseData:{},phaseiid:e.iid,visible:!0,newFlag:!1}),this.queryFormData(e.iid,e.sname,"edit")}}},{key:"queryFormData",value:function(e,t,a){var n=this,i="";"0"==e?"newPhase"==a?i="新建阶段":"newact"==a?i="新建活动":"newlcb"==a?i="新建里程碑":"newjfw"==a?i="新建交付物":"newPc"==a?i="新建批次":"newSprint"==a&&(i="新建Sprint"):i="计划>"+t,(0,x.vpAdd)("/{vppm}/vfrm/template/getNewForm",{newType:a,iid:e}).then(function(e){n.setState({modaltitle:i,increaseData:e.data.form,newType:a,entityrole:!0,visible:!0})})}},{key:"menuClick",value:function(e,t,a){this.setState({newFlag:!0,isClickMenu:!0});var n=e.key;if("newPhase"==n||"newact"==n||"newlcb"==n||"newjfw"==n||"newPc"==n||"newSprint"==n)this.setState({visible:!0,increaseData:{}}),this.queryFormData("0","",n);else if("up"==n||"down"==n){var i=this,s={newType:n,itemplateid:i.state.iid,iid:i.state.phaseiid};(0,x.vpAdd)("/{vppm}/vfrm/template/save",{sparam:(0,l["default"])(s)}).then(function(e){i.getData()})}else if("delete"==n){var o=this;(0,x.vpAdd)("/{vppm}/vfrm/template/delete",{deleteType:n,iid:this.state.phaseiid}).then(function(e){e.data.success?o.getData():(0,x.VpAlertMsg)({message:"消息提示",description:e.data.msg,type:"error",closeText:"关闭",showIcon:!0},5)})}}},{key:"render",value:function(){var e=this,t={entityrole:this.state.entityrole};return b["default"].createElement("div",{className:"full-height phase"},b["default"].createElement("div",{className:"p-sm bg-white",id:"table"},b["default"].createElement(x.VpTable,{className:"phaseTemp",onExpand:this.onExpand,columns:this.state.table_headers,dataSource:this.state.table_array,onChange:this.tableChange,onRowClick:this.onRowClick,pagination:this.state.pagination,expandIconColumnIndex:0,expandedRowKeys:this.state.expandedRowKeys,scroll:{x:1e3,y:this.state.tableHeight},resize:!0})),b["default"].createElement(x.VpModal,{title:this.state.modaltitle,visible:this.state.visible,onOk:function(){return e.okModal()},maskClosable:!1,onCancel:function(){return e.cancelModal()},width:"80%",height:"90%",footer:null,wrapClassName:"modal-no-footer"},b["default"].createElement(C.VpDynamicForm,{className:"p-sm full-height scroll p-b-xxlg",formData:this.state.increaseData,handleOk:this.saveRowData,handleCancel:this.handleCancel,loading:this.state.loading,params:t,okText:"保 存"})))}}]),t}(k.Component);t["default"]=D=(0,x.VpFormCreate)(D)},945:function(e,t,a){var n=a(946);"string"==typeof n&&(n=[[e.id,n,""]]);var i={hmr:!0};i.transform=void 0;a(465)(n,i);n.locals&&(e.exports=n.locals)},946:function(e,t){}});