webpackJsonp([30],{1275:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(172),n=l(i),s=a(323),c=l(s),o=a(459),r=l(o),d=a(54),u=l(d),f=a(55),h=l(f),p=a(59),m=l(p),g=a(93),y=l(g),v=a(8),b=l(v),w=a(4),k=a(609),C=a(1276),S=l(C);a(1277);var E=function(e){function t(e){(0,u["default"])(this,t);var a=(0,m["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,e));return a.getHeader=function(){var e=a,t={listType:"exaevalSet",quicktext:a.state.quicktext};(0,w.vpAdd)("/{vpplat}/exaeval/getListHeader",{sparam:(0,c["default"])(t)}).then(function(t){if(t&&t.hasOwnProperty("data")&&(e.setState({loading:!1}),t.data.hasOwnProperty("grid"))){var a=[];t.data.grid.hasOwnProperty("fields")&&(t.data.grid.fields.map(function(e,t){var l=void 0,i=void 0,n=void 0,s=void 0;for(var c in e)"field_label"==c?l=e[c]:"field_name"==c&&(i=e[c]),"fixed"==c&&(s=e[c]),"field_width"==c&&(n=e[c]);l&&i&&("left"==s||"right"==s?a.push({title:l,dataIndex:i,key:i,width:n,fixed:s}):a.push({title:l,dataIndex:i,key:i,fixed:s}))}),e.setState({table_headers:a}))}})["catch"](function(e){})},a.getData=function(){var e=a,t={listType:"exaevalSet",quicktext:a.state.quicktext,curr:a.state.cur_page,limit:a.state.num_perpage};(0,w.vpAdd)("/{vpplat}/exaeval/getListData",{sparam:(0,c["default"])(t)}).then(function(t){var a=t.data,l=function(){return"共"+a.totalRows+"条"},i=vp.computedHeight(a.totalRows,".dataTable");e.setState({tableHeight:i,table_array:a.resultList,cur_page:a.currentPage,total_rows:a.totalRows,num_perpage:a.numPerPage,pagination:{total:a.totalRows,showTotal:l,pageSize:a.numPerPage,onShowSizeChange:e.onShowSizeChange,showSizeChanger:!0,showQuickJumper:!0}})})["catch"](function(e){"function"!=typeof e||e()})},a.getEntityList=function(){var e=a,t={listType:"entity"};(0,w.vpAdd)("/{vpplat}/exaeval/getListData",{sparam:(0,c["default"])(t)}).then(function(t){t.data.data&&e.setState({entityTemplate:t.data.data})})["catch"](function(e){"function"!=typeof e||e()})},a.handleEntityChange=function(e){a.setState({ientityid:e,iclassid:0,classTemplate:[]},function(){a.getClassList()})},a.getClassList=function(){var e=a,t={listType:"class",ientityid:a.state.ientityid};(0,w.vpAdd)("/{vpplat}/exaeval/getListData",{sparam:(0,c["default"])(t)}).then(function(t){t.data.data&&e.setState({classTemplate:t.data.data,iclassid:0})})["catch"](function(e){"function"!=typeof e||e()})},a.handleClassChange=function(e){a.setState({iclassid:e})},a.loadQuotaLibraryList=function(e){var t=a,l={listType:"quotaLibraryList",iclassid:e};(0,w.vpAdd)("/{vpplat}/exaeval/getExaevalSetDetailList",{sparam:(0,c["default"])(l)}).then(function(e){var a="0";e.data.data.map(function(e){"1"==e.idefault&&(a=e.iid)}),t.setState({functionList:e.data.data,checkDefaultId:a},function(){})})},a.onChangeDefault=function(e,t){e[0]||!e[0]&&e.length>1?a.setState({checkDefaultId:t}):a.setState({checkDefaultId:"0"})},a.saveBat=function(){var e=a,t={ientityid:a.state.ientityid,iclassid:a.state.iclassid};if(0==t.ientityid)(0,w.VpAlertMsg)({message:"消息提示",description:"请选择实体！",type:"error",closeText:"关闭",showIcon:!0},5);else if(0==t.iclassid)(0,w.VpAlertMsg)({message:"消息提示",description:"请选择实体类别！",type:"error",closeText:"关闭",showIcon:!0},5);else{var l=[],i={},n=0,s=!0;$("#moveArea").find(".rowdiv").each(function(t,a){n=$(a).attr("data-id");var c={};if(e.state.functionList.map(function(e){if(e.iid==n)return c=e,!1}),i={iquotaid:c.iid,checkDefaultId:e.state.checkDefaultId},""==i.sname)return s=!1,(0,w.VpAlertMsg)({message:"消息提示",description:"第"+(t+1)+"行，显示名称不能为空！",type:"error",closeText:"关闭",showIcon:!0},5),!1;l.push(i)}),s&&(t["function"]=l,(0,w.vpAdd)("/{vpplat}/exaeval/save",{sparam:(0,c["default"])(t)}).then(function(t){e.setState({ientityid:0,iclassid:0,entityDisabled:!1,classDisabled:!1,visible:!1,functionList:[]},function(){e.getData()})}))}},a.delSelected=function(){var e=[],t={},l=0;a.state.functionList.map(function(i,n){l=i.iid;for(var s=a.state.selectRowArr,c=!1,o=0;o<s.length;o++)if(s[o]==l){c=!0;break}c||(t=i,t.iindex=n,e.push(t))}),a.setState({functionList:e,selectRowArr:[]})},a.btnOptClick=function(e){"saveBat"==e?a.saveBat():"addFun"==e?a.setState({showlist:!0,listtitle:"可选指标库列表"}):"delFun"==e?a.delSelected():"delAll"==e&&a.setState({functionList:[]})},a.okListModal=function(e){var t=a.state.functionList,l=0;e.map(function(e){-1==(l=t.findIndex(function(t){return e.iid===t.iid}))&&t.push(e)}),a.setState({functionList:t,showlist:!1},function(){})},a.cancelListModal=function(){a.setState({showlist:!1,listtitle:""})},a.quickSearch=function(e){var t=$.trim(e);a.setState({quicktext:t},function(){a.getData()})},a.state={filters:[],showRightBox:!1,table_headers:[],table_array:[],cur_page:1,num_perpage:10,pagination:{},formdata:[],visible:!1,showlist:!1,modaltitle:"",listtitle:"",selectiid:"",selectItem:[],selectedRowKeys:[],iflagValue:0,snameValue:"",siconValue:"",functionList:[],selectRowArr:[],iflagArr:[],tableHeight:"",entityTemplate:[],ientityid:0,classTemplate:[],iclassid:0,checkDefaultId:"0",entityDisabled:!1,classDisabled:!1},a.tableChange=a.tableChange.bind(a),a.getHeader=a.getHeader.bind(a),a.getData=a.getData.bind(a),a.cancelModal=a.cancelModal.bind(a),a.onExpand=a.onExpand.bind(a),a.toolBarClick=a.toolBarClick.bind(a),a.onRowClick=a.onRowClick.bind(a),a.handleSelect=a.handleSelect.bind(a),a.handleSelectAll=a.handleSelectAll.bind(a),a.onSelectChange=a.onSelectChange.bind(a),a}return(0,y["default"])(t,e),(0,h["default"])(t,[{key:"componentWillMount",value:function(){var e=this;this.setState({entityid:this.props.entityid,iid:this.props.iid},function(){e.getHeader(),e.getData()})}},{key:"componentDidMount",value:function(){var e=vp.computedHeight(this.state.table_array.length,".dataTable");this.setState({tableHeight:e})}},{key:"onShowSizeChange",value:function(e){}},{key:"tableChange",value:function(e,t,a){var l=this;this.setState({cur_page:e.current||this.state.cur_page,num_perpage:e.pageSize||this.state.num_perpage},function(){l.getData()})}},{key:"cancelModal",value:function(){this.setState({visible:!1,functionList:[],ientityid:0,entityTemplate:[],entityDisabled:!1,iclassid:0,classTemplate:[],classDisabled:!1})}},{key:"toolBarClick",value:function(e){var t=this;"add"==e?this.setState({modaltitle:"新建",iid:0,ientityid:0,iclassid:0,visible:!0,functionList:[]},function(){t.getEntityList()}):"del"==e&&(this.state.selectedRowKeys.length?(0,w.vpAdd)("/{vpplat}/exaeval/delete",{sparam:(0,c["default"])({iclassids:this.state.selectedRowKeys.join()})}).then(function(e){t.getData()}):(0,w.VpAlertMsg)({message:"消息提示",description:"请选择需要删除的数据！",type:"info",closeText:"关闭",showIcon:!0},5))}},{key:"onRowClick",value:function(e){var t=this;this.setState({modaltitle:"编辑>["+e.sentityname+"]"+e.sclassname,visible:!0,ientityid:e.ientityid,entityTemplate:[{value:e.ientityid,label:e.sentityname}],entityDisabled:!0,iclassid:e.iclassid,classTemplate:[{value:e.iclassid,label:e.sclassname}],classDisabled:!0},function(){t.loadQuotaLibraryList(e.iclassid)})}},{key:"handleSelect",value:function(e,t,a){var l=0;t?this.setState({selectedRowKeys:[].concat((0,n["default"])(this.state.selectedRowKeys),[e.iclassid])}):(this.state.selectedRowKeys.forEach(function(t,a){t===e.iclassid&&(l=a)}),this.setState({selectedRowKeys:[].concat((0,n["default"])(this.state.selectedRowKeys.slice(0,l)),(0,n["default"])(this.state.selectedRowKeys.slice(l+1)))}))}},{key:"onSelectChange",value:function(e){this.setState({selectedRowKeys:e})}},{key:"handleSelectAll",value:function(e,t,a){this.setState({selectItem:t})}},{key:"onExpand",value:function(e,t){}},{key:"selectRow",value:function(e){if(!($(e.target).closest(".defaultCol").length+$(e.target).closest(".displayCol").length>0)){var t=$(e.target).closest(".rowdiv"),a=this.state.selectRowArr,l=$(t).attr("data-id"),i=$.inArray(l,a),n=!0,s=$(e.target).attr("id");s==undefined||0!=s.indexOf("iflag")&&0!=s.indexOf("name")&&0!=s.indexOf("sicon")||(n=!1),n&&(i>=0?(a.splice(i,1),$(t).find(".rowitem").css("background-color","#ffffff"),$(t).find("input").css("background-color","#ffffff")):(a.push(l),$(t).find(".rowitem").css("background-color","#e8e8e8f5"),$(t).find("input").css("background-color","#e8e8e8f5")),this.setState({selectRowArr:a}))}}},{key:"render",value:function(){var e=this,t=this.state.selectedRowKeys,a={type:"checkbox",selectedRowKeys:t,onSelect:this.handleSelect,onSelectAll:this.handleSelectAll,onChange:this.onSelectChange};return b["default"].createElement("div",{className:"business-container pr full-height"},b["default"].createElement("div",{className:"subAssembly b-b bg-white",style:this.props.style},b["default"].createElement(w.VpRow,{gutter:1},b["default"].createElement(w.VpCol,{className:"gutter-row text-right",span:4},b["default"].createElement(k.SeachInput,{onSearch:this.quickSearch,placeholder:"输入名称查找"})),b["default"].createElement(w.VpCol,{className:"gutter-row text-right",span:20},b["default"].createElement(w.VpTooltip,{placement:"top",title:"添加"},b["default"].createElement(w.VpButton,{type:"primary",style:{margin:"0 3px"},shape:"circle",icon:"plus",onClick:function(){return e.toolBarClick("add")}})),b["default"].createElement(w.VpTooltip,{placement:"top",title:"删除"},b["default"].createElement(w.VpPopconfirm,{placement:"bottomLeft",title:"确认删除所选记录?",onConfirm:function(){return e.toolBarClick("del")},onCancel:this.cancel},b["default"].createElement(w.VpButton,{type:"ghost",style:{margin:"0 3px"},shape:"circle",icon:"cross"})))))),b["default"].createElement("div",{className:"business-wrapper p-t-sm full-height overflow"},b["default"].createElement("div",{className:"p-sm bg-white full-height scroll-y"},b["default"].createElement(w.VpTable,{className:"dataTable",onExpand:this.onExpand,columns:this.state.table_headers,dataSource:this.state.table_array,onChange:this.tableChange,onRowClick:this.onRowClick,pagination:this.state.pagination,rowSelection:a,rowKey:function(e){return e.iclassid},resize:!0,scroll:{y:this.state.tableHeight}}))),b["default"].createElement(w.VpModal,{title:this.state.modaltitle,visible:this.state.visible,onOk:function(){return e.cancelModal()},onCancel:function(){return e.cancelModal()},width:"80%",height:"90%",maskClosable:!1,footer:null,wrapClassName:"modal-no-footer"},this.state.visible?b["default"].createElement("div",{className:"business-container scroll full-height exaevalbat"},b["default"].createElement("div",{className:"bg-white p-sm"},b["default"].createElement("h4",{className:"p-b-sm fw b-b",style:{marginTop:-40}},"基本信息")),b["default"].createElement("div",{className:"baseDiv",key:"baseDiv"},b["default"].createElement(w.VpForm,null,b["default"].createElement(w.VpRow,null,b["default"].createElement(w.VpCol,{span:2,className:"text-right p-lr-sm"},b["default"].createElement("h4",{className:"ant-form-item-required"},"实体:")),b["default"].createElement(w.VpCol,{className:"gutter-row",span:9},b["default"].createElement(w.VpSelect,{style:{marginTop:-4},showSearch:!0,defaultValue:this.state.ientityid.toString(),onChange:this.handleEntityChange,optionFilterProp:"children",notFoundContent:"无法找到",disabled:this.state.entityDisabled},b["default"].createElement(w.VpOption,{value:"0"},"请选择实体"),this.state.entityTemplate.map(function(e,t){return b["default"].createElement(w.VpOption,{key:"entity"+t,value:e.hasOwnProperty("value")?e.value:""},e.hasOwnProperty("label")?e.label:"")}))),b["default"].createElement(w.VpCol,{span:2,className:"text-right p-lr-sm"},b["default"].createElement("h4",{className:"ant-form-item-required"},"状态:")),b["default"].createElement(w.VpCol,{key:"surl",span:9},b["default"].createElement(w.VpSelect,{style:{marginTop:-4},showSearch:!0,value:this.state.iclassid.toString(),onChange:this.handleClassChange,optionFilterProp:"children",notFoundContent:"无法找到",disabled:this.state.classDisabled},b["default"].createElement(w.VpOption,{value:"0"},"请选择实体类别"),this.state.classTemplate.map(function(e,t){return b["default"].createElement(w.VpOption,{key:"class"+t,value:e.hasOwnProperty("value")?e.value:""},e.hasOwnProperty("label")?e.label:"")})))))),b["default"].createElement("div",{className:"bg-white p-sm"},b["default"].createElement("h4",{className:"p-b-sm fw b-b"},"指标库列表")),b["default"].createElement("div",{className:"titleRow p-sm",key:"titleDiv"},b["default"].createElement(w.VpRow,{key:"titleRow"},b["default"].createElement(w.VpCol,{span:5,className:"text-center p-lr-sm "},b["default"].createElement("h4",{className:"fw"},"指标库名称")),b["default"].createElement(w.VpCol,{span:4,className:"text-center p-lr-sm "},b["default"].createElement("h4",{className:"fw"},"指标库编号")),b["default"].createElement(w.VpCol,{span:4,className:"text-center p-lr-sm "},b["default"].createElement("h4",{className:"fw"},"指标库类别")),b["default"].createElement(w.VpCol,{span:4,className:"text-center p-lr-sm "},b["default"].createElement("h4",{className:"fw"},"指标库图标")),b["default"].createElement(w.VpCol,{span:5,className:"text-center p-lr-sm "},b["default"].createElement("h4",{className:"fw"},"指标库描述")),b["default"].createElement(w.VpCol,{span:2,className:"text-center p-lr-sm "},b["default"].createElement("h4",{className:"fw"},"是否默认")))),b["default"].createElement("div",{className:"bg-white moveArea",id:"moveArea"},this.state.functionList.map(function(t){return b["default"].createElement("div",{key:"rowdiv"+t.iid,className:"bg-white rowdiv","data-id":t.iid,onClick:function(t){return e.selectRow(t)}},b["default"].createElement(w.VpRow,{key:"row"+t.iid,style:{marginTop:1,marginBottom:1,height:40},className:"b-b rowitem ",type:"flex",justify:"center",align:"middle"},b["default"].createElement(w.VpCol,{span:5,className:"text-center cursor"},t.sname),b["default"].createElement(w.VpCol,{span:4,className:"text-center cursor"},b["default"].createElement("div",{id:"scode"+t.iid},t.scode)),b["default"].createElement(w.VpCol,{span:4,className:"text-center "},b["default"].createElement("div",{id:"stype"+t.iid},t.stype)),b["default"].createElement(w.VpCol,{span:4,className:"text-center "},b["default"].createElement("div",{id:"sicon"+t.iid},t.sicon)),b["default"].createElement(w.VpCol,{span:5,className:"text-center displayCol"},b["default"].createElement("div",{id:"sdescription"+t.iid},t.sdescription)),b["default"].createElement(w.VpCol,{span:2,className:"text-center cursor defaultCol"},b["default"].createElement(w.VpCheckbox,{id:"idefault"+t.iid,value:[e.state.checkDefaultId==t.iid],options:[{label:"",value:!0}],onChange:function(a){return e.onChangeDefault(a,t.iid)}}))))})),b["default"].createElement("div",{className:"footer-button-wrap ant-modal-footer"},b["default"].createElement(w.VpButton,{key:"addFun",type:"ghost",className:"vp-btn-br",onClick:function(){return e.btnOptClick("addFun")}},"添加"),b["default"].createElement(w.VpButton,{key:"delFun",type:"ghost",className:"vp-btn-br",onClick:function(){return e.btnOptClick("delFun")}},"删除"),b["default"].createElement(w.VpButton,{key:"delAll",type:"ghost",className:"vp-btn-br",onClick:function(){return e.btnOptClick("delAll")}},"删除全部"),b["default"].createElement(w.VpButton,{key:"saveBat",type:"primary",className:"vp-btn-br",onClick:function(){return e.btnOptClick("saveBat")}},"保 存"))):""),b["default"].createElement(w.VpModal,{title:this.state.listtitle,visible:this.state.showlist,onOk:function(){return e.cancelListModal()},onCancel:function(){return e.cancelListModal()},width:"70%",height:"80%",maskClosable:!1,footer:null,wrapClassName:"modal-no-footer"},this.state.showlist?b["default"].createElement(S["default"],{iid:this.state.iid,okClick:function(t){return e.okListModal(t)},cancelClick:function(){return e.cancelListModal()}}):""))}}]),t}(v.Component);t["default"]=E=(0,w.VpFormCreate)(E)},1276:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(172),n=l(i),s=a(323),c=l(s),o=a(459),r=l(o),d=a(54),u=l(d),f=a(55),h=l(f),p=a(59),m=l(p),g=a(93),y=l(g),v=a(8),b=l(v),w=a(4),k=function(e){function t(e){(0,u["default"])(this,t);var a=(0,m["default"])(this,(t.__proto__||(0,r["default"])(t)).call(this,e));return a.state={tableHeight:"",filters:[],table_headers:[],table_array:[],cur_page:1,page:1,pagination:{},limit:10,sortfield:"",sorttype:"",selectItem:[],selectedRowKeys:[],tableloading:!0},a.tableChange=a.tableChange.bind(a),a.getHeader=a.getHeader.bind(a),a.getData=a.getData.bind(a),a.onRowClick=a.onRowClick.bind(a),a.handleSelect=a.handleSelect.bind(a),a.handleSelectAll=a.handleSelectAll.bind(a),a.onSelectChange=a.onSelectChange.bind(a),a}return(0,y["default"])(t,e),(0,h["default"])(t,[{key:"componentWillMount",value:function(){this.getHeader(),this.getData()}},{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.setState({tableloading:!1})},1e3);var t=vp.computedHeight(this.state.table_array.length,".dataTable");this.setState({tableHeight:t})}},{key:"getHeader",value:function(){var e=this,t={listType:"quotaLibrary"};(0,w.vpAdd)("/{vpplat}/exaeval/getListHeader",{sparam:(0,c["default"])(t)}).then(function(t){if(t&&t.hasOwnProperty("data")&&(e.setState({loading:!1}),t.data.hasOwnProperty("grid"))){var a=[];if(t.data.grid.hasOwnProperty("fields")){t.data.grid.fields.map(function(e,t){var l=void 0,i=void 0,n=void 0,s=void 0;for(var c in e)"field_label"==c?l=e[c]:"field_name"==c&&(i=e[c]),"fixed"==c&&(s=e[c]),"field_width"==c&&(n=e[c]);l&&i&&("left"==s||"right"==s?a.push({title:l,dataIndex:i,key:i,width:n,fixed:s}):a.push({title:l,dataIndex:i,key:i,fixed:s}))});var l=[];a.filter(function(e){return"sname"==e.dataIndex}).map(function(e){e.width=280,l.push(e)}),a.map(function(e,t){"sname"!=e.dataIndex&&l.push(e)}),e.setState({table_headers:l})}}})["catch"](function(e){})}},{key:"getData",value:function(){var e=this,t={listType:"quotaLibrary",iid:this.props.iid};(0,w.vpAdd)("/{vpplat}/exaeval/getQuotaLibraryList",{sparam:(0,c["default"])(t)}).then(function(t){var a=t.data.page,l=function(){return"共"+a.totalRows+"条"},i=vp.computedHeight(a.totalRows,".dataTable");e.setState({tableHeight:i,table_array:a.resultList,cur_page:a.currentPage,total_rows:a.totalRows,num_perpage:a.numPerPage,pagination:{showTotal:l,pageSize:a.numPerPage,showSizeChanger:!1,showQuickJumper:!1}}),a.resultList.map(function(t,a){0==t.checked&&e.onRowClick(t)})})["catch"](function(e){"function"!=typeof e||e()})}},{key:"tableChange",value:function(e,t,a){var l=this,i="";"descend"===a.order?i="desc":"ascend"===a.order&&(i="asc"),this.setState({cur_page:e.current||this.state.cur_page,sortfield:a.field,sorttype:i,limit:e.pageSize||this.state.limit},function(){l.getData()})}},{key:"onRowClick",value:function(e){var t=this.state.selectedRowKeys.findIndex(function(t){return e.iid===t}),a=!0;-1!=t&&(a=!1),a?this.setState({selectedRowKeys:[].concat((0,n["default"])(this.state.selectedRowKeys),[e.iid]),selectItem:[].concat((0,n["default"])(this.state.selectItem),[e])},function(){e.hasOwnProperty("children")}):this.setState({selectedRowKeys:[].concat((0,n["default"])(this.state.selectedRowKeys.slice(0,t)),(0,n["default"])(this.state.selectedRowKeys.slice(t+1))),selectItem:[].concat((0,n["default"])(this.state.selectItem.slice(0,t)),(0,n["default"])(this.state.selectItem.slice(t+1)))},function(){e.hasOwnProperty("children")})}},{key:"handleSelect",value:function(e,t){var a=0;t?this.setState({selectedRowKeys:[].concat((0,n["default"])(this.state.selectedRowKeys),[e.iid]),selectItem:[].concat((0,n["default"])(this.state.selectItem),[e])},function(){e.hasOwnProperty("children")}):(this.state.selectedRowKeys.forEach(function(t,l){t===e.iid&&(a=l)}),this.setState({selectedRowKeys:[].concat((0,n["default"])(this.state.selectedRowKeys.slice(0,a)),(0,n["default"])(this.state.selectedRowKeys.slice(a+1))),selectItem:[].concat((0,n["default"])(this.state.selectItem.slice(0,a)),(0,n["default"])(this.state.selectItem.slice(a+1)))},function(){e.hasOwnProperty("children")}))}},{key:"cascadeSelect",value:function(e,t){var a=this,l=0,i=[],s=[];if(e.hasOwnProperty("children")&&e.children.forEach(function(e,n){l=a.state.selectedRowKeys.findIndex(function(t){return e.iid===t}),t?-1==l&&(i.push(e.iid),s.push(e)):-1!=l&&(i.push(e.iid),s.push(e))}),t)this.setState({selectedRowKeys:[].concat((0,n["default"])(this.state.selectedRowKeys),i),selectItem:[].concat((0,n["default"])(this.state.selectItem),s)},function(){});else{var c=[],o=[];this.state.selectItem.forEach(function(e,t){-1==(l=i.findIndex(function(t){return e.iid===t}))&&(o.push(e),c.push(e.iid))}),this.setState({selectedRowKeys:c,selectItem:o},function(){})}}},{key:"onSelectChange",value:function(e){this.setState({selectedRowKeys:e})}},{key:"handleSelectAll",value:function(e,t,a){this.setState({selectItem:t})}},{key:"okClick",value:function(){this.state.selectItem.length>0?this.props.okClick(this.state.selectItem):(0,w.VpAlertMsg)({message:"消息提示",description:"请至少选择一条数据！",type:"error",closeText:"关闭",showIcon:!0},5)}},{key:"cancelClick",value:function(){this.props.cancelClick()}},{key:"render",value:function(){var e=this,t=this.state.selectedRowKeys,a={type:"checkbox",selectedRowKeys:t,onSelect:this.handleSelect,onSelectAll:this.handleSelectAll,onChange:this.onSelectChange};return b["default"].createElement("div",{className:"bg-white scroll full-height p-b-xxlg"},b["default"].createElement("div",{className:"p-sm"},b["default"].createElement(w.VpTable,{className:"dataTable",loading:this.state.tableloading,columns:this.state.table_headers,dataSource:this.state.table_array,onChange:this.tableChange,onRowClick:this.onRowClick,pagination:this.state.pagination,rowSelection:a,rowKey:function(e){return e.iid},resize:!0,scroll:{y:this.state.tableHeight-175}})),b["default"].createElement("div",{className:"footer-button-wrap ant-modal-footer"},b["default"].createElement(w.VpButton,{key:"confirmBtn",type:"primary",className:"vp-btn-br",onClick:function(){return e.okClick()}},"确认"),b["default"].createElement(w.VpButton,{key:"cancelBtn",type:"primary",className:"vp-btn-br",onClick:function(){return e.cancelClick()}},"取消")))}}]),t}(v.Component);t["default"]=k=(0,w.VpFormCreate)(k)},1277:function(e,t,a){var l=a(1278);"string"==typeof l&&(l=[[e.id,l,""]]);var i={hmr:!0};i.transform=void 0;a(465)(l,i);l.locals&&(e.exports=l.locals)},1278:function(e,t){}});